<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">

  <Parameter/>

  <MBSimProject xmlns="http://www.mbsim-env.de/MBSimXML" name="Project">

    <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
      <Parameter>
        <scalarParameter name="enable_frame_torsion">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_swingarm_torsion">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_rider_lean">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_rider_yaw">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_rider_lateral">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_fork_rot_x">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_fork_rot_y">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_fork_rot_z">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_front_susp">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_rear_susp">1                     % [/]</scalarParameter>
        <scalarParameter name="enable_aero">1                     % [/]</scalarParameter>
        <scalarParameter name="Komp_Gyro_FW">0                     % Comp. centrifugal moments front wheel [/]          </scalarParameter>
        <scalarParameter name="Komp_Gyro_RW">0                     % Comp. centrifugal moments rear wheel [/]          </scalarParameter>
        <scalarParameter name="Switch_Gyro_comp_wobble">0                     % Comp. centrifugal moment fork bending [/]</scalarParameter>
        <scalarParameter name="Switch_Komp_vy">0                     % Comp. r*alp in v_cf_C [/]</scalarParameter>
        <scalarParameter name="v0">50                % [km/h]                                            </scalarParameter>
        <scalarParameter name="Velocity_controller">0                     % [/]</scalarParameter>
        <scalarParameter name="Steering_controller">0                     % [/]                           </scalarParameter>
        <scalarParameter name="Brake_distribution">0.8                   % front brake</scalarParameter>
        <scalarParameter name="Torque_steer_cos">0                     % [Nm]       </scalarParameter>
        <scalarParameter name="T_To_start">0                     % [sec]      </scalarParameter>
        <scalarParameter name="T_To_exc">1.5                   % Duration Torque [sec]      </scalarParameter>
        <scalarParameter name="Fy_Impuls">0 %1000                %  [N]       </scalarParameter>
        <scalarParameter name="T_Fy_start">0                     % [sec]      </scalarParameter>
        <scalarParameter name="T_Fy_exc">0.2                   % Duration Fy_Impuls [sec]      </scalarParameter>
        <scalarParameter name="steering_damper">6.944               %[Nm]</scalarParameter>
        <scalarParameter name="M0_rot_y_fork">108.49              % preload fork [Nm]</scalarParameter>
        <scalarParameter name="caster_angle">-0.4189             % [rad]</scalarParameter>
        <scalarParameter name="h_road_waves">0*0.02              % height cosinus-road waves [m]</scalarParameter>
        <scalarParameter name="l_road_waves">2.65                 % length road waves [m]</scalarParameter>
        <scalarParameter name="n_road_waves">2                   % number of road waves [/]</scalarParameter>
        <scalarParameter name="T_start_road_waves">1                      % [sec]</scalarParameter>
        <scalarParameter name="wheelbase">1.41                 % [m]</scalarParameter>
      </Parameter>
     <DynamicSystemSolver xmlns="http://www.mbsim-env.de/MBSim" name="MBS">
        <plotFeatureRecursive value="generalizedPosition">true</plotFeatureRecursive>
        <plotFeatureRecursive value="generalizedVelocity">true</plotFeatureRecursive>
        <plotFeatureRecursive value="ns1:signal" xmlns:ns1="http://www.mbsim-env.de/MBSimControl">true</plotFeatureRecursive>
        <plotFeatureRecursive value="acceleration">true</plotFeatureRecursive>
        <plotFeatureRecursive value="angularAcceleration">true</plotFeatureRecursive>
        <plotFeatureRecursive value="generalizedForce">true</plotFeatureRecursive>
        <frames>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Front_wheel.xml">
            <FixedRelativeFrame xmlns="http://www.mbsim-env.de/MBSim" name="cam_pos_xy">
              <relativePosition unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0</ele>
                  <ele>0</ele>
                  <ele>z0_I_Road</ele>
              </xmlVector>
            </relativePosition>
          </FixedRelativeFrame>
        </Embed>
      </frames>  
        <contours/>
        <groups>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
            <Parameter>
          </Parameter>
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Controller">
              <frames/>
              <contours/>
              <groups>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <Parameter>
                    <scalarParameter name="M_brake_max">-1000                %[Nm]</scalarParameter>
                    <scalarParameter name="M_drive_max">400                    %[N]</scalarParameter>
                    <scalarParameter name="T_cos_start">0                     % [sec]      </scalarParameter>
                    <scalarParameter name="T_cos_exc">2                     % [sec]      </scalarParameter>
                    <scalarParameter name="T_end">5                     % [sec]      </scalarParameter>
                    <scalarParameter name="v_cos_end">150                  % [km/h]                                            </scalarParameter>
                    <scalarParameter name="v_end">150                  % [km/h]                                            </scalarParameter>
                    <scalarParameter name="Switch_brake">1                     % Brake on/off [/]</scalarParameter>
                    <scalarParameter name="Switch_throttle">1                     % Throttle on/off [/]</scalarParameter>
                    <scalarParameter name="M_brake_stat_f_max">0                      % max static torque front brake [Nm]</scalarParameter>
                    <scalarParameter name="M_brake_stat_r_max">0                      % max static torque rear brake [Nm]</scalarParameter>
                    <scalarParameter name="P_long">800                % P-value longitudinal controller [/]</scalarParameter>
                    <scalarParameter name="I_long">5</scalarParameter>
                    <scalarParameter name="D_long">10</scalarParameter>
                    <scalarParameter name="C_long">1</scalarParameter>
                    <scalarParameter name="f_long">1</scalarParameter>
                    <scalarParameter name="R1_long">1/(2*pi*f_long*C_long)</scalarParameter>
                    <scalarParameter name="R2_long">sqrt(R1_long^2+1/C_long^2)</scalarParameter>
                  </Parameter>
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="longitudinal">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="vx_target">
                        <inputSignal ref="../../Link[time]"/>
                        <function>
                          <PiecewiseDefinedFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <limitedFunctions>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>v0/3.6</a0>
                                </ConstantFunction>
                              </function>
                                <limit>T_cos_start</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <SymbolicFunction arg1="t" arg1Dim="1">
                                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                      <ele>ret = v_cos_end/3.6 + (v0-v_cos_end)/3.6*0.5*(1+cos(pi*1/(T_cos_exc)*(t(1)-T_cos_start)))</ele>
                                  </xmlVector>
                                </SymbolicFunction>
                              </function>
                                <limit>T_cos_start + T_cos_exc</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>v_end/3.6</a0>
                                </ConstantFunction>
                              </function>
                                <limit>T_end</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>v_end/3.6</a0>
                                </ConstantFunction>
                              </function>
                                <limit>1000</limit>
                            </LimitedFunction>
                          </limitedFunctions>
                            <shiftAbscissa>false</shiftAbscissa>
                        </PiecewiseDefinedFunction>
                      </function>
                    </SignalOperation>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="vx_diff">
                        <inputSignal ref="../../Link[v_x]"/>
                        <inputSignal ref="../Link[vx_target]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="vx" arg1Dim="1" arg2="vxt" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = vxt(1) - vx(1)</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_brake_f_stat">
                        <inputSignal ref="../../Link[time]"/>
                        <function>
                          <TabularFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <xy>
                              <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <row>
                                  <ele>0</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>1</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>1.5</ele>
                                  <ele>M_brake_stat_f_max*(1-Velocity_controller)</ele>
                                </row>
                                <row>
                                  <ele>3.</ele>
                                  <ele>M_brake_stat_f_max*(1-Velocity_controller)</ele>
                                </row>
                                <row>
                                  <ele>3.5</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>100</ele>
                                  <ele>0</ele>
                                </row>
                              </xmlMatrix>
                            </xy>
                          </TabularFunction>
                        </function>
                      </SignalOperation>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_brake_r_stat">
                        <inputSignal ref="../../Link[time]"/>
                        <function>
                          <TabularFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <xy>
                              <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <row>
                                  <ele>0</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>1</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>1.5</ele>
                                  <ele>M_brake_stat_r_max*(1-Velocity_controller)</ele>
                                </row>
                                <row>
                                  <ele>3.</ele>
                                  <ele>M_brake_stat_r_max*(1-Velocity_controller)</ele>
                                </row>
                                <row>
                                  <ele>3.5</ele>
                                  <ele>0</ele>
                                </row>
                                <row>
                                  <ele>100</ele>
                                  <ele>0</ele>
                                </row>
                              </xmlMatrix>
                            </xy>
                          </TabularFunction>
                        </function>
                      </SignalOperation>  
                      <LinearTransferSystem xmlns="http://www.mbsim-env.de/MBSimControl" name="PID_long">
                        <inputSignal ref="../Link[vx_diff]"/>
                        <systemMatrix>
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                              <ele>0</ele>
                        </row>
                            <row>
                              <ele>0</ele>
                              <ele>-1/(R1_long*C_long)</ele>
                        </row>
                      </xmlMatrix>
                    </systemMatrix>
                        <inputMatrix>
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>1</ele>
                        </row>
                            <row>
                              <ele>1/(R1_long*C_long)</ele>
                        </row>
                      </xmlMatrix>
                    </inputMatrix>
                        <outputMatrix>
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>I_long</ele>
                              <ele>-D_long*R2_long*C_long/(R1_long*C_long)</ele>
                        </row>
                      </xmlMatrix>
                    </outputMatrix>
                        <feedthroughMatrix>
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>P_long+D_long*R2_long*C_long/(R1_long*C_long)</ele>
                        </row>
                      </xmlMatrix>
                    </feedthroughMatrix>
                  </LinearTransferSystem>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_long">
                        <inputSignal ref="../Link[PID_long]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = M(1)*Velocity_controller</ele>
                        </xmlVector>
                      </SymbolicFunction>
                    </function>
                  </SignalOperation>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_brake_lim">
                        <inputSignal ref="../Link[M_long]"/>
                        <function>
                          <BoundedFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <lowerBound>M_brake_max</lowerBound>
                            <upperBound>0</upperBound>
                          </BoundedFunction>
                        </function>
                      </SignalOperation>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_brake">
                        <inputSignal ref="../Link[M_brake_lim]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Mbr" arg1Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = Mbr(1)*Switch_brake</ele>
                            </xmlVector>
                          </SymbolicFunction>
                        </function>
                      </SignalOperation>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_drive_lim">
                        <inputSignal ref="../Link[M_long]"/>
                        <function>
                          <BoundedFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <lowerBound>0</lowerBound>
                            <upperBound>M_drive_max</upperBound>
                          </BoundedFunction>
                        </function>
                      </SignalOperation>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_drive">
                        <inputSignal ref="../Link[M_drive_lim]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Mdr" arg1Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = Mdr(1)*Switch_throttle</ele>
                            </xmlVector>
                          </SymbolicFunction>
                        </function>
                      </SignalOperation>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <Parameter>
                    <scalarParameter name="Setval_roll_angle">0                   % [Grad]                                             </scalarParameter>
                    <scalarParameter name="T_roll_start">0.6                   % [sec]      </scalarParameter>
                    <scalarParameter name="T_roll_exc">1                     % Duration ramp up setvalue [sec]      </scalarParameter>
                  </Parameter>
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="lateral">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <KineticExcitation name="Torque_steering_cos_exc">
                        <connect ref1="../../../Group[Group_Frame]/Object[frame_torsion]/Frame[C]" ref2="../../../Group[Group_Front_fork]/Object[Steering_axis]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                          </row>
                            <row>
                              <ele>0</ele>
                          </row>
                            <row>
                              <ele>1</ele>
                          </row>
                        </xmlMatrix>
                      </momentDirection>
                        <momentFunction>
                          <PiecewiseDefinedFunction>
                            <limitedFunctions>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>0</a0>
                                </ConstantFunction>
                              </function>
                                <limit>T_To_start</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <SymbolicFunction arg1="t">
                                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                      <ele>ret = Torque_steer_cos*0.5*(1-cos(2*pi*1/T_To_exc*t))*(1-Steering_controller)</ele>
                                  </xmlVector>
                                </SymbolicFunction>
                              </function>
                                <limit>T_To_start + T_To_exc</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>0</a0>
                                </ConstantFunction>
                              </function>
                                <limit>1000</limit>
                            </LimitedFunction>
                          </limitedFunctions>
                        </PiecewiseDefinedFunction>
                      </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.333333</ele>
                              <ele>1</ele>
                              <ele>0.666667</ele>
                          </xmlVector>
                        </diffuseColor>
                          <scaleLength>.1</scaleLength>
                          <scaleSize>.1</scaleSize>
                      </enableOpenMBV>
                    </KineticExcitation>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="roll_angle">
                        <object ref="../../../Group[Group_Frame]/Object[roll_axis]"/>
                  </GeneralizedPositionSensor>  
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="roll_angle_vel">
                        <object ref="../../../Group[Group_Frame]/Object[roll_axis]"/>
                  </GeneralizedVelocitySensor>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="roll_angle_setval">
                        <inputSignal ref="../../Link[time]"/>
                        <function>
                          <PiecewiseDefinedFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <limitedFunctions>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>0</a0>
                                </ConstantFunction>
                              </function>
                                <limit>T_roll_start</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <SymbolicFunction arg1="t" arg1Dim="1">
                                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                      <ele>ret = Setval_roll_angle*pi/180*0.5*(1-cos(pi*1/(T_roll_exc)*(t(1)-T_roll_start)))</ele>
                                  </xmlVector>
                                </SymbolicFunction>
                              </function>
                                <limit>T_roll_start + T_roll_exc</limit>
                            </LimitedFunction>
                              <LimitedFunction>
                                <function>
                                  <ConstantFunction>
                                    <a0>Setval_roll_angle*pi/180</a0>
                                </ConstantFunction>
                              </function>
                                <limit>1000</limit>
                            </LimitedFunction>
                          </limitedFunctions>
                        </PiecewiseDefinedFunction>
                      </function>
                    </SignalOperation>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_steer_stat_100kmh">
                        <inputSignal ref="../Link[roll_angle]"/>
                        <function>
                          <TabularFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <xy>
                              <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <row>
                                  <ele>-0.9</ele>
                                  <ele>-6.</ele>
                              </row>
                                <row>
                                  <ele>-0.8</ele>
                                  <ele>-7.91</ele>
                              </row>
                                <row>
                                  <ele>-0.75</ele>
                                  <ele>-8.73</ele>
                              </row>
                                <row>
                                  <ele>-0.7</ele>
                                  <ele>-9.02</ele>
                              </row>
                                <row>
                                  <ele>-0.65</ele>
                                  <ele>-8.96</ele>
                              </row>
                                <row>
                                  <ele>-0.6</ele>
                                  <ele>-8.66</ele>
                              </row>
                                <row>
                                  <ele>-0.5</ele>
                                  <ele>-7.51</ele>
                              </row>
                                <row>
                                  <ele>-0.4</ele>
                                  <ele>-5.95</ele>
                              </row>
                                <row>
                                  <ele>-0.3</ele>
                                  <ele>-4.24</ele>
                              </row>
                                <row>
                                  <ele>0</ele>
                                  <ele>0</ele>
                              </row>
                                <row>
                                  <ele>0.3</ele>
                                  <ele>4.24</ele>
                              </row>
                                <row>
                                  <ele>0.4</ele>
                                  <ele>5.95</ele>
                              </row>
                                <row>
                                  <ele>0.5</ele>
                                  <ele>7.51</ele>
                              </row>
                                <row>
                                  <ele>0.6</ele>
                                  <ele>8.66</ele>
                              </row>
                                <row>
                                  <ele>0.65</ele>
                                  <ele>8.96</ele>
                              </row>
                                <row>
                                  <ele>0.7</ele>
                                  <ele>9.02</ele>
                              </row>
                                <row>
                                  <ele>0.75</ele>
                                  <ele>8.73</ele>
                              </row>
                                <row>
                                  <ele>0.8</ele>
                                  <ele>7.91</ele>
                              </row>
                                <row>
                                  <ele>9</ele>
                                  <ele>6.0</ele>
                              </row>
                            </xmlMatrix>
                          </xy>
                        </TabularFunction>
                      </function>
                    </SignalOperation>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Param_P_controller">
                        <inputSignal ref="../../Link[v_x]"/>
                        <inputSignal ref="../Link[roll_angle]"/>
                        <function>
                          <TwoDimensionalTabularFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <x>
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>0</ele>
                                <ele>50/3.6</ele>
                                <ele>100/3.6</ele>
                                <ele>200/3.6</ele>
                                <ele>300/3.6</ele>
                            </xmlVector>
                          </x>
                            <y>
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>-0.9</ele>
                                <ele>0</ele>
                                <ele>0.9</ele>
                            </xmlVector>
                          </y>
                            <z>
                              <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <row>
                                  <ele>40</ele>
                                  <ele>40</ele>
                                  <ele>25</ele>
                                  <ele>25</ele>
                                  <ele>25</ele>
                              </row>
                                <row>
                                  <ele>50</ele>
                                  <ele>50</ele>
                                  <ele>60</ele>
                                  <ele>150</ele>
                                  <ele>150</ele>
                              </row>
                                <row>
                                  <ele>40</ele>
                                  <ele>40</ele>
                                  <ele>25</ele>
                                  <ele>25</ele>
                                  <ele>25</ele>
                              </row>
                            </xmlMatrix>
                          </z>
                        </TwoDimensionalTabularFunction>
                      </function>
                    </SignalOperation>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Param_K_controller">
                        <inputSignal ref="../../Link[v_x]"/>
                        <inputSignal ref="../Link[roll_angle]"/>
                        <function>
                          <TwoDimensionalTabularFunction xmlns="http://www.mbsim-env.de/MBSim">
                            <x>
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>0</ele>
                                <ele>50/3.6</ele>
                                <ele>100/3.6</ele>
                                <ele>200/3.6</ele>
                                <ele>300/3.6</ele>
                            </xmlVector>
                          </x>
                            <y>
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>-0.9</ele>
                                <ele>0</ele>
                                <ele>0.9</ele>
                            </xmlVector>
                          </y>
                            <z>
                              <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <row>
                                  <ele>4</ele>
                                  <ele>8</ele>
                                  <ele>35</ele>
                                  <ele>90</ele>
                                  <ele>90</ele>
                              </row>
                                <row>
                                  <ele>10</ele>
                                  <ele>10</ele>
                                  <ele>20</ele>
                                  <ele>60</ele>
                                  <ele>60</ele>
                              </row>
                                <row>
                                  <ele>4</ele>
                                  <ele>8</ele>
                                  <ele>35</ele>
                                  <ele>90</ele>
                                  <ele>90</ele>
                              </row>
                            </xmlMatrix>
                          </z>
                        </TwoDimensionalTabularFunction>
                      </function>
                    </SignalOperation>
                      <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_controller_input">
                        <inputSignal ref="../Link[roll_angle_setval]"/>
                        <inputSignal ref="../Link[roll_angle]"/>
                        <inputSignal ref="../Link[roll_angle_vel]"/>
                        <inputSignal ref="../Link[Param_P_controller]"/>
                        <inputSignal ref="../Link[Param_K_controller]"/>
                        <inputSignal ref="../Link[M_steer_stat_100kmh]"/>
                  </Multiplexer>  
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_controller_sop">
                        <inputSignal ref="../Link[steering_controller_input]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="in" arg1Dim="6">RW_s = in(1);
RW    = in(2);
RWp  = in(3);
P       = in(4);
K       = in(5);
MLs   = in(6);
%----------------------------------------------
P_Reg = P*(RW_s-RW)+MLs;
K_Reg = K*RWp;
ret = [Steering_controller*(P_Reg+K_Reg)]</SymbolicFunction>
                      </function>
                    </SignalOperation>  
                      <KineticExcitation name="steering_controller_exc">
                        <connect ref1="../../../Group[Group_Frame]/Object[frame_torsion]/Frame[C]" ref2="../../../Group[Group_Front_fork]/Object[Steering_axis]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>1</ele>
                            </row>
                          </xmlMatrix>
                        </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[steering_controller_sop]"/>
                          </SignalFunction>
                        </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.333333</ele>
                              <ele>1</ele>
                              <ele>1</ele>
                            </xmlVector>
                          </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                        </enableOpenMBV>
                      </KineticExcitation>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
              </groups>
              <objects/>
              <links>
                <FunctionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="time">
                  <function>
                    <LinearFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <a1>1</a1>
                </LinearFunction>
              </function>
            </FunctionSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="v_x">
                  <inputSignal ref="../../Group[Group_Rear_wheel]/Link[v_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = v(1)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <AccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="a_frame_I">
                  <frame ref="../../Group[Group_Frame]/Object[Frame]/Frame[C]"/>
                </AccelerationSensor>
                <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_yaw_axis">
                  <frame ref="../../Group[Group_Frame]/Object[yaw_axis]/Frame[C]"/>
                </OrientationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="a_frame_yaw_Axis">
                  <inputSignal ref="../Link[a_frame_I]"/>
                  <inputSignal ref="../Link[S_I_yaw_axis]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="a" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*a(1) + s(4)*a(2) + s(7)*a(3) </ele>
                        <ele>ret = s(2)*a(1) + s(5)*a(2) + s(8)*a(3) </ele>
                        <ele>ret = s(3)*a(1) + s(6)*a(2) + s(9)*a(3) </ele>
                      </xmlVector>
                    </SymbolicFunction>
                  </function>
                </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Roll_angle_deg">
                  <inputSignal ref="../Group[lateral]/Link[roll_angle]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = al(1)*180/pi</ele>
                      </xmlVector>
                    </SymbolicFunction>
                  </function>
                </SignalOperation>
              </links>
              <constraints/>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Frame.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Frame">
              <frameOfReference ref="../Frame[I]"/>
              <frames/>
              <contours/>
              <groups>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_frame_torsion" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_frame_torsion">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="al_tors_Frame">
                        <object ref="../../Object[frame_torsion]"/>
                    </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="alp_tors_Frame">
                        <object ref="../../Object[frame_torsion]"/>
                    </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_tors_Frame_sop">
                        <inputSignal ref="../Link[al_tors_Frame]"/>
                        <inputSignal ref="../Link[alp_tors_Frame]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1" arg2="alp" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret=-tors_Frame(1)*al(1) - tors_Frame(2)*alp(1) + 1e-7</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>      
                      <KineticExcitation name="Mx_tors_Frame_exc">
                        <connect ref1="../../Object[Frame]/Frame[steering_head]" ref2="../../Object[frame_torsion]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>1</ele>
                          </row>
                            <row>
                              <ele>0</ele>
                          </row>
                            <row>
                              <ele>0</ele>
                          </row>
                        </xmlMatrix>
                      </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mx_tors_Frame_sop]"/>
                        </SignalFunction>
                      </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                          </xmlVector>
                        </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                      </enableOpenMBV>
                    </KineticExcitation>
                  </links>
                    <constraints/>
                    <observers/>
                </Group>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_lean" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_rider_torsion">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="al_rider">
                        <object ref="../../Object[upper_body]"/>
                    </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="alp_rider">
                        <object ref="../../Object[upper_body]"/>
                    </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_rider_sop">
                        <inputSignal ref="../Link[al_rider]"/>
                        <inputSignal ref="../Link[alp_rider]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1" arg2="alp" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret=-rider_lean(1)*al(1) - rider_lean(2)*alp(1) + 1e-7</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>      
                      <KineticExcitation name="Mx_rider_exc">
                        <connect ref1="../../Object[lower_body]/Frame[C]" ref2="../../Object[upper_body]/Frame[joint_rider]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>1</ele>
                          </row>
                            <row>
                              <ele>0</ele>
                          </row>
                            <row>
                              <ele>0</ele>
                          </row>
                        </xmlMatrix>
                      </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mx_rider_sop]"/>
                        </SignalFunction>
                      </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                          </xmlVector>
                        </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                      </enableOpenMBV>
                    </KineticExcitation>
                  </links>
                    <constraints/>
                    <observers/>
                </Group>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_lateral" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_rider_lateral">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="y_rider">
                        <object ref="../../Object[lower_body]"/>
                      </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="yp_rider">
                        <object ref="../../Object[lower_body]"/>
                      </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fy_rider_sop">
                        <inputSignal ref="../Link[y_rider]"/>
                        <inputSignal ref="../Link[yp_rider]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="y" arg1Dim="1" arg2="yp" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret=-rider_lat(1)*y(1) - rider_lat(2)*yp(1) </ele>
                            </xmlVector>
                          </SymbolicFunction>
                        </function>
                      </SignalOperation>      
                      <KineticExcitation name="Fy_rider_exc">
                        <connect ref1="../../Object[Frame]/Frame[CG_lower_body]" ref2="../../Object[lower_body]/Frame[C]"/>
                        <forceDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>1</ele>
                            </row>
                            <row>
                              <ele>0</ele>
                            </row>
                          </xmlMatrix>
                        </forceDirection>
                        <forceFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Fy_rider_sop]"/>
                          </SignalFunction>
                        </forceFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                            </xmlVector>
                          </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                        </enableOpenMBV>
                      </KineticExcitation>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_yaw" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_rider_yaw">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="theta_rider_yaw">
                        <object ref="../../Object[torso_z_rotation]"/>
                      </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="thetap_rider_yaw">
                        <object ref="../../Object[torso_z_rotation]"/>
                      </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_rider_yaw_sop">
                        <inputSignal ref="../Link[theta_rider_yaw]"/>
                        <inputSignal ref="../Link[thetap_rider_yaw]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="theta" arg1Dim="1" arg2="thetap" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret=-rider_yaw_upper_body(1)*theta(1) - rider_yaw_upper_body(2)*thetap(1)</ele>
                            </xmlVector>
                          </SymbolicFunction>
                        </function>
                      </SignalOperation>
                      <KineticExcitation name="Mz_rider_yaw_exc">
                        <connect ref1="../../Object[lower_body]/Frame[C]" ref2="../../Object[torso_z_rotation]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>1</ele>
                            </row>
                          </xmlMatrix>
                        </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mz_rider_yaw_sop]"/>
                          </SignalFunction>
                        </momentFunction>
                        <enableOpenMBV>
                          <scaleSize>0.1</scaleSize>
                        </enableOpenMBV>
                      </KineticExcitation>
                    </links>
                    <constraints/>
                    <observers/>
                    <enableOpenMBVFrameI/>
                  </Group>
                </Embed>
              </groups>
              <objects>
                <RigidBody name="yaw_axis">
                  <generalizedInitialPosition>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                    </xmlVector>
                  </generalizedInitialPosition>
                  <generalizedInitialVelocity>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>(v0/3.6)</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                    </xmlVector>
                  </generalizedInitialVelocity>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentTranslation>
                    <TranslationAlongAxesXYZ/>
                  </stateDependentTranslation>
                  <stateDependentRotation>
                    <RotationAboutZAxis/>
                  </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">.01</radius>
                      <height unit="m">.2</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="roll_axis">
                  <frameOfReference ref="../Object[yaw_axis]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </row>
                  </xmlMatrix>
                </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutXAxis/>
                </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">0.02</radius>
                      <height unit="m">0.1</height>
                  </Cylinder>
                </openMBVRigidBody>
              </RigidBody>
                <RigidBody name="Frame">
                  <generalizedInitialPosition>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>0</ele>
                    </xmlVector>
                  </generalizedInitialPosition>
                  <frameOfReference ref="../Object[roll_axis]/Frame[C]"/>
                  <frameForKinematics ref="Frame[point_for_kin]"/>
                  <mass unit="kg">m_Frame</mass>
                  <inertiaTensor unit="kg*m^2">T_Frame</inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="point_for_kin">
                      <relativePosition unit="m">point_for_kin</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="CG_lower_body">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">CG_lower_body</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="CG_trim_mass">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">CG_trim_mass</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="steering_head">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">steering_head</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="axis_swingarm">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">axis_swingarm</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="rear_suspension_top">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">rear_suspension_top</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="wheel_axis_rear">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">wheel_axis_rear</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="pack_bag_le">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">pack_bag_le</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="pack_bag_ri">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">pack_bag_ri</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="p19">
                      <frameOfReference ref="../Frame[point_for_kin]"/>
                      <relativePosition unit="m">p19</relativePosition>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.13</ele>
                          <ele>0</ele>
                          <ele>0.16</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>caster_angle</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.75</ele>
                          <ele>.05</ele>
                          <ele>.25</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                  <openMBVFrameOfReference ref="Frame[point_for_kin]"/>
                </RigidBody>
                <RigidBody name="frame_torsion">
                  <frameOfReference ref="../Object[Frame]/Frame[steering_head]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutXAxis/>
                  </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">.01</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody></RigidBody>
                <RigidBody name="lower_body">
                  <frameOfReference ref="../Object[Frame]/Frame[CG_lower_body]"/>
                  <mass unit="kg">m_lower_body</mass>
                  <inertiaTensor unit="kg*m^2">T_lower_body</inertiaTensor>
                  <stateDependentTranslation>
                    <TranslationAlongYAxis/>
                  </stateDependentTranslation>
                  <frames>
                </frames>  
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">.01</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="torso_z_rotation">
                  <frameOfReference ref="../Object[lower_body]/Frame[C]"/>
                  <frameForKinematics ref="Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0.00001</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0.00001</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0.00001</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutZAxis/>
                  </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <scaleFactor unit="-">.01</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="upper_body">
                  <frameOfReference ref="../Object[torso_z_rotation]/Frame[C]"/>
                  <frameForKinematics ref="Frame[joint_rider]"/>
                  <mass unit="kg">m_upper_body</mass>
                  <inertiaTensor unit="kg*m^2">T_upper_body</inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutXAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="joint_rider">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">joint_rider</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="right_shoulder">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">right_shoulder</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="left_shoulder">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">left_shoulder</relativePosition>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>.05</ele>
                          <ele>.05</ele>
                          <ele>.05</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody><RigidBody name="trim_mass">
                  <frameOfReference ref="../Object[Frame]/Frame[CG_trim_mass]"/>
                  <mass unit="kg">m_trim_mass</mass>
                  <inertiaTensor unit="kg*m^2">T_trim_mass</inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">.01</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody><RigidBody name="pack_bag_le">
                  <frameOfReference ref="../Object[Frame]/Frame[pack_bag_le]"/>
                  <mass unit="kg">m_pack_bag</mass>
                  <inertiaTensor unit="kg*m^2">T_pack_bag</inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">1</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>.3</ele>
                          <ele>.2</ele>
                          <ele>.3</ele>
                      </xmlVector>
                    </length>
                  </Cuboid>
                </openMBVRigidBody>
              </RigidBody>  
                <RigidBody name="pack_bag_ri">
                  <frameOfReference ref="../Object[Frame]/Frame[pack_bag_ri]"/>
                  <mass unit="kg">m_pack_bag</mass>
                  <inertiaTensor unit="kg*m^2">T_pack_bag</inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">1</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                      </xmlVector>
                    </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>.3</ele>
                          <ele>.2</ele>
                          <ele>.3</ele>
                      </xmlVector>
                    </length>
                  </Cuboid>
                </openMBVRigidBody>
              </RigidBody>  
                <RigidBody name="upper_frame_vis">
                  <frameOfReference ref="../Object[Frame]/Frame[rear_suspension_top]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.2</ele>
                          <ele>0.04</ele>
                          <ele>0.04</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
              </objects>
              <links>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="trail">
                  <inputSignal ref="../../Group[Group_Controller]/Link[time]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="x" arg1Dim="1">x_LK  = (steering_head(3)- z0_I_Road(3))*tan(-caster_angle(1))
x_RA =  x_Frame_C(1) - steering_head(1)  
ret=x_LK-x_RA</SymbolicFunction>
                  </function>
                </SignalOperation>
                <KineticExcitation name="Fy_Impuls">
                  <connect ref2="../Object[Frame]/Frame[steering_head]"/>
                  <frameOfReference>"secondFrame"</frameOfReference>
                  <forceDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>1</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </forceDirection>
                  <forceFunction>
                    <PiecewiseDefinedFunction>
                      <limitedFunctions>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>T_Fy_start</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <SymbolicFunction arg1="t">
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>ret = Fy_Impuls*0.5*(1-cos(2*pi*1/T_Fy_exc*t))%*(1-Steering_controller)</ele>
                              </xmlVector>
                            </SymbolicFunction>
                          </function>
                          <limit>T_Fy_start+T_Fy_exc</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>1000</limit>
                        </LimitedFunction>
                      </limitedFunctions>
                    </PiecewiseDefinedFunction>
                  </forceFunction>
                  <enableOpenMBV/>
                </KineticExcitation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Aero_force_sop">
                  <inputSignal ref="../../Group[Group_Controller]/Link[v_x]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v" arg1Dim="1">drag = 0.5*0.48*0.65*1.225*(v(1)/3.6)^2
lift = 0.5*0.078*0.65*1.225*(v(1)/3.6)^2
ret = [drag;lift]</SymbolicFunction>
                  </function>
                </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Aero_moment_sop">
                  <inputSignal ref="../../Group[Group_Controller]/Link[v_x]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v" arg1Dim="1">ret = 0.5*0.189*0.65*1.225*(v(1)/3.6)^2</SymbolicFunction>
                  </function>
                </SignalOperation>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_aero" counterName="n">
                  <KineticExcitation xmlns="http://www.mbsim-env.de/MBSim" name="Aero_force_moment_exc">
                    <connect ref2="../Object[Frame]/Frame[point_for_kin]"/>
                    <forceDirection unit="-">
                      <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <row>
                          <ele>-1</ele>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                          <ele>1</ele>
                        </row>
                      </xmlMatrix>
                    </forceDirection>
                    <forceFunction>
                      <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                        <returnSignal ref="../../Link[Aero_force_sop]"/>
                      </SignalFunction>
                    </forceFunction>
                    <momentDirection unit="-">
                      <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <row>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>-1</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                    <momentFunction>
                      <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                        <returnSignal ref="../../Link[Aero_moment_sop]"/>
                      </SignalFunction>
                    </momentFunction>
                  </KineticExcitation>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_yaw" counterName="n">
                  <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="Arms_mom_input">
                    <inputSignal ref="../Group[Dof_rider_yaw]/Link[theta_rider_yaw]"/>
                    <inputSignal ref="../Group[Dof_rider_yaw]/Link[thetap_rider_yaw]"/>
                    <inputSignal ref="../../Group[Group_Front_fork]/Link[steering_angle]"/>
                    <inputSignal ref="../../Group[Group_Front_fork]/Link[steering_angle_vel]"/>
                  </Multiplexer>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_yaw" counterName="n">
                  <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Arms_mom">
                    <inputSignal ref="../Link[Arms_mom_input]"/>
                    <function>
                      <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4">gamma=i(1);
gamma_p=i(2);
delta=i(3);
delta_p=i(4);

ret=(gamma-delta)*rider_yaw_arms(1)+(gamma_p-delta_p)*rider_yaw_arms(2)</SymbolicFunction>
                    </function>
                  </SignalOperation>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_yaw" counterName="n">
                  <KineticExcitation xmlns="http://www.mbsim-env.de/MBSim" name="Arms_mom_upperbody">
                    <connect ref1="../Object[lower_body]/Frame[C]" ref2="../Object[torso_z_rotation]/Frame[C]"/>
                    <momentDirection unit="-">
                      <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <row>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>-1</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                    <momentFunction>
                      <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                        <returnSignal ref="../../Link[Arms_mom]"/>
                      </SignalFunction>
                    </momentFunction>
                    <enableOpenMBV>
                      <scaleLength>.1</scaleLength>
                      <scaleSize>.1</scaleSize>
                    </enableOpenMBV>
                  </KineticExcitation>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rider_yaw" counterName="n">
                  <KineticExcitation xmlns="http://www.mbsim-env.de/MBSim" name="Arms_mom_handlebar">
                    <connect ref1="../Object[frame_torsion]/Frame[C]" ref2="../../Group[Group_Front_fork]/Object[Steering_axis]/Frame[C]"/>
                    <momentDirection unit="-">
                      <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <row>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>1</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                    <momentFunction>
                      <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                        <returnSignal ref="../../Link[Arms_mom]"/>
                      </SignalFunction>
                    </momentFunction>
                    <enableOpenMBV>
                      <scaleLength>.1</scaleLength>
                      <scaleSize>.1</scaleSize>
                    </enableOpenMBV>
                  </KineticExcitation>
                </Embed>
              </links>
              <constraints>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_frame_torsion" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_al_frame_torsion">
                    <dependentRigidBody ref="../Object[frame_torsion]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                    </ConstantFunction>
                  </constraintFunction>
                </GeneralizedPositionConstraint>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rider_lean" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_al_rider_torsion">
                    <dependentRigidBody ref="../Object[upper_body]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                    </ConstantFunction>
                  </constraintFunction>
                </GeneralizedPositionConstraint>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rider_lateral" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_y_rider_lateral">
                    <dependentRigidBody ref="../Object[lower_body]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                      </ConstantFunction>
                    </constraintFunction>
                  </GeneralizedPositionConstraint>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rider_yaw" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_theta_rider_yaw">
                    <dependentRigidBody ref="../Object[torso_z_rotation]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                      </ConstantFunction>
                    </constraintFunction>
                  </GeneralizedPositionConstraint>
                </Embed>
              </constraints>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Front_fork.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Front_fork">
              <frames/>
              <contours/>
              <groups>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_fork_rot_x" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_fork_rot_x">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="al_fork">
                        <object ref="../../Object[Fork_rot_x]"/>
                  </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="alp_fork">
                        <object ref="../../Object[Fork_rot_x]"/>
                  </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_bend_fork_sop">
                        <inputSignal ref="../Link[al_fork]"/>
                        <inputSignal ref="../Link[alp_fork]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1" arg2="alp" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = -bend_fork(1)*al(1) - bend_fork(2)*alp(1) + 1e-7</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>      
                      <KineticExcitation name="Mx_bend_fork_exc">
                        <connect ref1="../../Object[upper_fork]/Frame[fork_joint]" ref2="../../Object[Fork_rot_x]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>1</ele>
                        </row>
                            <row>
                              <ele>0</ele>
                        </row>
                            <row>
                              <ele>0</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mx_bend_fork_sop]"/>
                      </SignalFunction>
                    </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                    </enableOpenMBV>
                  </KineticExcitation>
                  </links>
                    <constraints/>
                    <observers/>
                </Group>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_fork_rot_y" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_fork_rot_y">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="be_fork">
                        <object ref="../../Object[Fork_rot_y]"/>
                  </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="bep_fork">
                        <object ref="../../Object[Fork_rot_y]"/>
                  </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="My_bend_fork_sop">
                        <inputSignal ref="../Link[be_fork]"/>
                        <inputSignal ref="../Link[bep_fork]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="be" arg1Dim="1" arg2="bep" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = -bend_fork(1)*be(1) - bend_fork(2)*bep(1) + M0_rot_y_fork</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>      
                      <KineticExcitation name="My_bend_fork_exc">
                        <connect ref1="../../Object[Fork_rot_x]/Frame[C]" ref2="../../Object[Fork_rot_y]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                        </row>
                            <row>
                              <ele>1</ele>
                        </row>
                            <row>
                              <ele>0</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[My_bend_fork_sop]"/>
                      </SignalFunction>
                    </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                          <scaleLength>.001</scaleLength>
                          <scaleSize>.1</scaleSize>
                    </enableOpenMBV>
                  </KineticExcitation>
                  </links>
                    <constraints/>
                    <observers/>
                </Group>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_fork_rot_z" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_fork_rot_z">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="ga_fork">
                        <object ref="../../Object[Fork_rot_z]"/>
                  </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="gap_fork">
                        <object ref="../../Object[Fork_rot_z]"/>
                  </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_tors_fork_sop">
                        <inputSignal ref="../Link[ga_fork]"/>
                        <inputSignal ref="../Link[gap_fork]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="ga" arg1Dim="1" arg2="gap" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret = -tors_fork(1)*ga(1) - tors_fork(2)*gap(1)</ele>
                          </xmlVector>
                        </SymbolicFunction>
                      </function>
                    </SignalOperation>      
                      <KineticExcitation name="Mz_tors_fork_exc">
                        <connect ref1="../../Object[Fork_rot_y]/Frame[C]" ref2="../../Object[Fork_rot_z]/Frame[C]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>0</ele>
                        </row>
                            <row>
                              <ele>0</ele>
                        </row>
                            <row>
                              <ele>1</ele>
                        </row>
                      </xmlMatrix>
                    </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mz_tors_fork_sop]"/>
                      </SignalFunction>
                    </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                    </enableOpenMBV>
                  </KineticExcitation>
                  </links>
                    <constraints/>
                    <observers/>
                </Group>
              </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_front_susp" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_fork_suspension">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="z_susp_f">
                        <object ref="../../Object[lower_fork]"/>
                  </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="zp_susp_f">
                        <object ref="../../Object[lower_fork]"/>
                  </GeneralizedVelocitySensor>
                      <SpringDamper name="SpringDamper_f">
                        <connect ref1="../../Object[Fork_rot_z]/Frame[suspension_f]" ref2="../../Object[lower_fork]/Frame[joint_fork]"/>
                        <forceFunction>
                          <NonlinearSpringDamperForce>
                            <forceDeflectionFunction>
                              <TabularFunction>
                                <xy>
                                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                    <row>
                                      <ele>-1</ele>
                                      <ele>-c_suspension_f</ele>
                                    </row>
                                    <row>
                                      <ele>0</ele>
                                      <ele>0</ele>
                                    </row>
                                    <row>
                                      <ele>1</ele>
                                      <ele>c_suspension_f</ele>
                                    </row>
                                  </xmlMatrix>
                                </xy>
                              </TabularFunction>
                            </forceDeflectionFunction>
                            <forceVelocityFunction>
                              <TabularFunction>
                                <xy>
                                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                    <row>
                                      <ele>-2</ele>
                                      <ele>-Fd_compression_f</ele>
                                    </row>
                                    <row>
                                      <ele>-0.2</ele>
                                      <ele>-Fd_compression_f/10</ele>
                                    </row>
                                    <row>
                                      <ele>-0.1</ele>
                                      <ele>-Fd_compression_f/20</ele>
                                    </row>
                                    <row>
                                      <ele>0</ele>
                                      <ele>0</ele>
                                    </row>
                                    <row>
                                      <ele>0.1</ele>
                                      <ele>Fd_rebound_f/20</ele>
                                    </row>
                                    <row>
                                      <ele>0.2</ele>
                                      <ele>Fd_rebound_f/10</ele>
                                    </row>
                                    <row>
                                      <ele>2</ele>
                                      <ele>Fd_rebound_f</ele>
                                    </row>
                                  </xmlMatrix>
                                </xy>
                              </TabularFunction>
                            </forceVelocityFunction>
                          </NonlinearSpringDamperForce>
                        </forceFunction>
                        <unloadedLength unit="m">F0_suspension_f/c_suspension_f + L0_spring_f</unloadedLength>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0</ele>
                              <ele>1</ele>
                              <ele>0.666667</ele>
                            </xmlVector>
                          </diffuseColor>
                          <numberOfCoils>15</numberOfCoils>
                          <springRadius unit="m">0.025</springRadius>
                          <crossSectionRadius unit="m">0.005</crossSectionRadius>
                        </enableOpenMBV>
                      </SpringDamper>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
              </groups>
              <objects>
                <RigidBody name="Steering_axis">
                  <generalizedInitialPosition>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>0</ele>
                    </xmlVector>
                  </generalizedInitialPosition>
                  <frameOfReference ref="../../Group[Group_Frame]/Object[frame_torsion]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutZAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="horizontal">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">-caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="CG_upper_fork">
                      <frameOfReference ref="../Frame[horizontal]"/>
                      <relativePosition unit="m">CG_upper_fork</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.03</ele>
                          <ele>0</ele>
                          <ele>0.1</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.08</ele>
                          <ele>0.2</ele>
                          <ele>0.2</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC/>
                </RigidBody>
                <RigidBody name="upper_fork">
                  <frameOfReference ref="../Object[Steering_axis]/Frame[CG_upper_fork]"/>
                  <mass unit="kg">m_upper_fork</mass>
                  <inertiaTensor unit="kg*m^2">T_upper_fork</inertiaTensor>
                  <frames>
                    <FixedRelativeFrame name="horizontal">
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">-caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="fork_joint">
                      <frameOfReference ref="../Frame[horizontal]"/>
                      <relativePosition unit="m">fork_joint</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">.02</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody></RigidBody>
                <RigidBody name="Fork_rot_x">
                  <frameOfReference ref="../Object[upper_fork]/Frame[fork_joint]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutXAxis/>
                  </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.583333</ele>
                          <ele>0.666667</ele>
                          <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">0.03</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Fork_rot_y">
                  <frameOfReference ref="../Object[Fork_rot_x]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.583333</ele>
                          <ele>0.666667</ele>
                          <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">0.03</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Fork_rot_z">
                  <frameOfReference ref="../Object[Fork_rot_y]/Frame[C]"/>
                  <frameForKinematics ref="Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutZAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="suspension_f">
                      <relativePosition unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>L0_spring_f</ele>
                        </xmlVector>
                      </relativePosition>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">0.02</length>
                    </Cube>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="lower_fork">
                  <frameOfReference ref="../Object[Fork_rot_z]/Frame[C]"/>
                  <frameForKinematics ref="Frame[joint_fork]"/>
                  <mass unit="kg">m_lower_fork</mass>
                  <inertiaTensor unit="kg*m^2">T_lower_fork</inertiaTensor>
                  <stateDependentTranslation>
                    <TranslationAlongZAxis/>
                  </stateDependentTranslation>
                  <frames>
                    <FixedRelativeFrame name="joint_fork">
                      <frameOfReference ref="../Frame[horizontal]"/>
                      <relativePosition unit="m">joint_fork</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="Wheel_Center">
                      <frameOfReference ref="../Frame[horizontal]"/>
                      <relativePosition unit="m">Wheel_Center</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="horizontal">
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">-caster_angle</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">.02</scaleFactor>
                      <length unit="m">1</length>
                    </Cube>
                  </openMBVRigidBody></RigidBody>
                <RigidBody name="stanchion_left">
                  <frameOfReference ref="../Object[Steering_axis]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames>
                    <FixedRelativeFrame name="FixedRelativeFrame"/>
              </frames>    
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.026</ele>
                          <ele>0.1</ele>
                          <ele>-0.18</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="degree">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>90</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">0.04</radius>
                      <height unit="m">0.71</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>  
                <RigidBody name="stanchion_right">
                  <frameOfReference ref="../Object[Steering_axis]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.026</ele>
                          <ele>-0.1</ele>
                          <ele>-0.18 </ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="degree">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>90</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">0.04</radius>
                      <height unit="m">0.71</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>  
                <RigidBody name="handlebar">
                  <frameOfReference ref="../Object[Steering_axis]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames>
                    <FixedRelativeFrame name="right_handlebar">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">right_handlebar</relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="left_handlebar">
                      <relativePosition unit="m">left_handlebar</relativePosition>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>.026</ele>
                          <ele>0</ele>
                          <ele>0.17</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">.03</radius>
                      <height unit="m">.6</height>
                    </Cylinder>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC/></RigidBody>  
                <RigidBody name="Steeraxis_trail">
                  <frameOfReference ref="../Object[Steering_axis]/Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.666667</ele>
                          <ele>1</ele>
                          <ele>.3</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>-0.47</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="degree">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>90</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">.005</radius>
                      <height unit="m">1.15</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>  
              </objects>
              <links>
                <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_angle">
                  <object ref="../Object[Steering_axis]"/>
            </GeneralizedPositionSensor>
                <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_angle_vel">
                  <object ref="../Object[Steering_axis]"/>
            </GeneralizedVelocitySensor>
                <GeneralizedAccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_angle_acc">
                  <object ref="../Object[Steering_axis]"/>
                </GeneralizedAccelerationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="steering_damper_sop">
                  <inputSignal ref="../Link[steering_angle_vel]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=-om(1)*steering_damper</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <KineticExcitation name="steering_damper_exc">
                  <connect ref1="../../Group[Group_Frame]/Object[frame_torsion]/Frame[C]" ref2="../Object[Steering_axis]/Frame[C]"/>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>1</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[steering_damper_sop]"/>
                  </SignalFunction>
                </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.666667</ele>
                        <ele>.3</ele>
                        <ele>1</ele>
                    </xmlVector>
                  </diffuseColor>
                    <scaleLength>.1</scaleLength>
                    <scaleSize>.1</scaleSize>
                </enableOpenMBV>
              </KineticExcitation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="fork_offset">
                  <inputSignal ref="../../Group[Group_Controller]/Link[time]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="t" arg1Dim="1">rI = CG_upper_fork + fork_joint - joint_fork + Wheel_Center;    % vector Steering-Head to wheel-center (I-System)
x_offset = cos(-caster_angle)*rI(1) + sin(-caster_angle)*rI(3);
ret= [x_offset]</SymbolicFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="h_offset">
                  <inputSignal ref="../../Group[Group_Controller]/Link[time]"/>
                  <function>
                    <ConstantFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <a0>joint_fork(3)-Wheel_Center(3)</a0>
                    </ConstantFunction>
                  </function>
                </SignalOperation>
              </links>
              <constraints>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_fork_rot_x" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_fork_rot_x">
                    <dependentRigidBody ref="../Object[Fork_rot_x]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                  </ConstantFunction>
                </constraintFunction>
              </GeneralizedPositionConstraint>
            </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_fork_rot_y" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_fork_rot_y">
                    <dependentRigidBody ref="../Object[Fork_rot_y]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                  </ConstantFunction>
                </constraintFunction>
              </GeneralizedPositionConstraint>
            </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_fork_rot_z" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_fork_rot_z">
                    <dependentRigidBody ref="../Object[Fork_rot_z]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                  </ConstantFunction>
                </constraintFunction>
              </GeneralizedPositionConstraint>
            </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_front_susp" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_z_fork_susp">
                    <dependentRigidBody ref="../Object[lower_fork]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                  </ConstantFunction>
                </constraintFunction>
              </GeneralizedPositionConstraint>
            </Embed>
          </constraints>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Front_wheel.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Front_wheel">
              <frames/>
              <contours/>
              <groups/>
              <objects>
                <RigidBody name="Front_wheel">
                  <generalizedInitialVelocity>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>(v0/3.6)/r_FW</ele>
                    </xmlVector>
                  </generalizedInitialVelocity>
                  <frameOfReference ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
                  <mass unit="kg">m_FW</mass>
                  <inertiaTensor unit="kg*m^2">T_FW</inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="unbalance_FW">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">unbalance_FW</relativePosition>
                  </FixedRelativeFrame>
                </frames>  
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-1</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">r_FW</radius>
                      <height unit="m">0.02</height>
                    </Cylinder>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC>
                    <size unit="m">.4</size>
              </enableOpenMBVFrameC>  
                </RigidBody>
                <RigidBody name="unbalance">
                  <frameOfReference ref="../Object[Front_wheel]/Frame[unbalance_FW]"/>
                  <mass unit="kg">m_unbalance</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>1</ele>
                          <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.01</ele>
                          <ele>0.01</ele>
                          <ele>0.01</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
              </objects>
              <links>
                <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_Waf">
                  <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
            </OrientationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_Wf">
                  <inputSignal ref="../Link[S_I_Waf]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="s" arg1Dim="9">x=sqrt( s(5)*s(5)+s(2)*s(2) )
sx=s(5)/x
sy=s(2)/x
ret = [ sx;   s(2);  -sy*s(8); 
         -sy;   s(5);  -sx*s(8);  
           0;   s(8);    sx*s(5)+sy*s(2)] % Drehmatrix Inertial =&gt; W-System (x-Achse parallel zur Fahrbahn, y-Achse in Richtung Radachse)</SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_Cf">
                  <inputSignal ref="../Link[S_I_Wf]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="s" arg1Dim="9">ret = [ s(1); -s(4);  0 ; 
          s(4);   s(1);  0 ;  
          s(7);   0    ;  1  ]    % Drehmatrix Inertial =&gt; C-System (x-Achse parallel zur Fahrbahn, z-Achse normal zur Fahrbahn</SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Rollangle_f">
                  <inputSignal ref="../Link[S_I_Cf]"/>
                  <inputSignal ref="../Link[S_I_Wf]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="sc" arg1Dim="9" arg2="sw" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = asin(sc(3)*sw(2)+sc(6)*sw(5)+sc(9)*sw(8))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_Wcf_I">
                  <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
            </AngularVelocitySensor>  
                <VelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="v_Wcf_I">
                  <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
            </VelocitySensor>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="contact_f_input">
                  <inputSignal ref="../Link[om_Wcf_I]"/>
                  <inputSignal ref="../Link[S_I_Wf]"/>
                  <inputSignal ref="../Link[v_Wcf_I]"/>
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <inputSignal ref="../Link[S_I_Cf]"/>
                  <inputSignal ref="../../Group[Group_Front_fork]/Group[Dof_fork_rot_x]/Link[alp_fork]"/>
                  <inputSignal ref="../../Group[Group_Front_fork]/Link[h_offset]"/>
                </Multiplexer>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="v_cf_C">
                  <inputSignal ref="../Link[contact_f_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="27">om_Wc_I      = [i(1); i(2); i(3)];
S_I_w           = [i(4);i(5);i(6);i(7);i(8);i(9);i(10);i(11);i(12)];
om_Wc_W     =  [S_I_w(1)*om_Wc_I(1) + S_I_w(4)*om_Wc_I(2) + S_I_w(7)*om_Wc_I(3);...
                          S_I_w(2)*om_Wc_I(1) + S_I_w(5)*om_Wc_I(2) + S_I_w(8)*om_Wc_I(3);...
                          S_I_w(3)*om_Wc_I(1) + S_I_w(6)*om_Wc_I(2) + S_I_w(9)*om_Wc_I(3)];
v_Wc_I        = [i(13); i(14); i(15)];
v_Wc_W      =  [S_I_w(1)*v_Wc_I(1) + S_I_w(4)*v_Wc_I(2) + S_I_w(7)*v_Wc_I(3);...
                        S_I_w(2)*v_Wc_I(1) + S_I_w(5)*v_Wc_I(2) + S_I_w(8)*v_Wc_I(3);...
                        S_I_w(3)*v_Wc_I(1) + S_I_w(6)*v_Wc_I(2) + S_I_w(9)*v_Wc_I(3)];
al                 = i(16);
r_w_c_W      = [0; - rc_FW*sin(al);  - r_rim_FW - rc_FW*cos(al)];

alp_Gabel    = i(26);
v_cos          = alp_Gabel*(i(27)+r_FW)/cos(caster_angle)*Switch_Komp_vy;

v_c_W          = [v_Wc_W(1) + om_Wc_W(2)*r_w_c_W(3) -  om_Wc_W(3)*r_w_c_W(2);...
                        v_Wc_W(2) -  om_Wc_W(1)*r_w_c_W(3) + om_Wc_W(3)*r_w_c_W(1) - v_cos;...
                        v_Wc_W(3) + om_Wc_W(1)*r_w_c_W(2)  - om_Wc_W(2)*r_w_c_W(1)];

v_c_I           =  [S_I_w(1)*v_c_W(1) + S_I_w(2)*v_c_W(2) + S_I_w(3)*v_c_W(3);...
                        S_I_w(4)*v_c_W(1) + S_I_w(5)*v_c_W(2) + S_I_w(6)*v_c_W(3);...
                        S_I_w(7)*v_c_W(1) + S_I_w(8)*v_c_W(2) + S_I_w(9)*v_c_W(3)];

S_I_c           = [i(17); i(18); i(19); i(20); i(21); i(22); i(23); i(24); i(25)];
v_c_C          =  [S_I_c(1)*v_c_I(1) + S_I_c(4)*v_c_I(2) + S_I_c(7)*v_c_I(3);...
                        S_I_c(2)*v_c_I(1) + S_I_c(5)*v_c_I(2) + S_I_c(8)*v_c_I(3);...
                        S_I_c(3)*v_c_I(1) + S_I_c(6)*v_c_I(2) + S_I_c(9)*v_c_I(3)];

ret=[v_c_C(1);v_c_C(2);v_c_C(3)]
</SymbolicFunction>
                  </function>
                </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Kyal_f">
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Fz" arg1Dim="1" arg2="ga" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = pKy1*Fz0_FW*sin(pKy2*atan(Fz(1)/((pKy3+pKy4*ga(1)^2)*Fz0_FW)))/(1+pKy5*ga(1)^2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="s_relax_f">
                  <inputSignal ref="../Link[Kyal_f]"/>
                  <inputSignal ref="../Link[v_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Kyal" arg1Dim="1" arg2="v" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=Kyal(1)*(8.633*10^(-6)+3.725*10^(-8)*v(1)+8.398*10^(-10)*(v(1))^2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Long_slip_f">
                  <inputSignal ref="../Link[v_rot_f]"/>
                  <inputSignal ref="../Link[v_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v_rot" arg1Dim="1" arg2="v_C" arg2Dim="3">ret=-(v_C(1)+v_rot(1))/v_C(1)

</SymbolicFunction>
                </function>
              </SignalOperation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_f_input">
                  <inputSignal ref="../Link[Slipangle_f]"/>
                  <inputSignal ref="../Link[s_relax_f]"/>
                  <inputSignal ref="../Link[v_cf_C]"/>
              </Multiplexer>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_f">
                  <inputSignal ref="../Link[v_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=atan(v(2)/v(1))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>  
                <NonlinearTransferSystem xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_f_pt1">
                  <inputSignal ref="../Link[Slipangle_f_input]"/>
                  <systemFunction>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="x" arg1Dim="1" arg2="u" arg2Dim="5">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>(u(1)-x(1))*u(3)/u(2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </systemFunction>
                  <outputFunction>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="x" arg1Dim="1" arg2="u" arg2Dim="5">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>x(1)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </outputFunction>
              </NonlinearTransferSystem>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="r_cf_C">
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = 0</ele>
                        <ele>ret = - r_rim_FW*sin(al(1))</ele>
                        <ele>ret =   r_rim_FW*cos(al(1)) + rc_FW</ele>
                      </xmlVector>
                    </SymbolicFunction>
                  </function>
                </SignalOperation>  
                <PositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="r_Wcf_I">
                  <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
            </PositionSensor>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="road_excitation_f">
                  <inputSignal ref="../../Group[Group_Controller]/Link[time]"/>
                  <function>
                    <PiecewiseDefinedFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <limitedFunctions>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>T_start_road_waves</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <SymbolicFunction arg1="t" arg1Dim="1">
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>ret = h_road_waves/2*( 1-cos (2*pi*  v0/(3.6*l_road_waves)*       (t(1)-T_start_road_waves))       )</ele>
                              </xmlVector>
                            </SymbolicFunction>
                          </function>
                          <limit>T_start_road_waves + n_road_waves*l_road_waves/v0*3.6</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>100</limit>
                        </LimitedFunction>
                      </limitedFunctions>
                    </PiecewiseDefinedFunction>
                  </function>
                </SignalOperation>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="z_tyre_f_input">
                  <inputSignal ref="../Link[r_Wcf_I]"/>
                  <inputSignal ref="../Link[r_cf_C]"/>
                  <inputSignal ref="../Link[road_excitation_f]"/>
                </Multiplexer><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="z_Tyre_f">
                  <inputSignal ref="../Link[z_tyre_f_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="7">rI  = i(3)
rC = i(6)
zR   = i(7)

ret = -rC -z0_I_Road + rI - zR</SymbolicFunction>
                  </function>
                </SignalOperation><Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="Tyre_f_input">
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <inputSignal ref="../Link[Long_slip_f]"/>
                  <inputSignal ref="../Link[Slipangle_f_pt1]"/>
                  <inputSignal ref="../Link[Kyal_f]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fx_Tyre_f_C">
                  <inputSignal ref="../Link[Tyre_f_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzV" arg2Dim="1">ka = i(2)
als = i(3)
Fz = FzV(1)
Fz0 = Fz0_FW

dfz=(Fz-Fz0)/Fz0
Dx=(pDx1+pDx2*dfz)*Fz
Ex=(pEx1+pEx2*dfz+pEx3*dfz^2)*(1-pEx4*sign(ka))
Kxka=Fz*(pKx1+pKx2*dfz)*exp(pKx3*dfz)
Bx=Kxka/(Cx*Dx)
Fx0=Dx*sin(Cx*atan(Bx*ka-Ex*(Bx*ka-atan(Bx*ka))))

Bxal=rBx1*cos(atan(rBx2*ka))
Fx=cos(Cxal*atan(Bxal*als))*Fx0

ret=Fx</SymbolicFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fy_Tyre_f_C">
                  <inputSignal ref="../Link[Tyre_f_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzV" arg2Dim="1">Fz0   = Fz0_FW
Fz     = FzV(1)
ga     = i(1)
ka     = i(2)
als    = i(3)
Kyal  = i(4)

dfz=(Fz-Fz0)/Fz0
Dy=Fz*pDy1*exp(pDy2*dfz)/(1+pDy3*ga^2)
Ey=pEy1+pEy2*ga^2+pEy4*ga*sign(als)
%Kyal=pKy1*Fz0*sin(pKy2*atan(Fz/((pKy3+pKy4*ga^2)*Fz0)))/(1+pKy5*ga^2)
By=Kyal/(Cy*Dy)
Kyga=(pKy6+pKy7*dfz)*Fz
Bga=Kyga/(Cga*Dy)
Fy0=Dy*sin(Cy*atan(By*als-Ey*(By*als-atan(By*als)))+Cga*atan(Bga*ga-Ega*(Bga*ga-atan(Bga*ga))))

Byka=rBy1*cos(atan(rBy2*(als-rBy3)))
Fy=cos(Cyka*atan(Byka*ka))*Fy0

ret=-Fy</SymbolicFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_f_unlim">
                  <inputSignal ref="../Link[z_Tyre_f]"/>
                  <inputSignal ref="../Link[v_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="z" arg1Dim="1" arg2="v" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret =-c_z_FW*z(1) - d_z_FW*v(3) + Fz0_FW</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_f_C">
                  <inputSignal ref="../Link[Fz_Tyre_f_unlim]"/>
                  <function>
                    <BoundedFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <lowerBound>1</lowerBound>
                      <upperBound>5000</upperBound>
                    </BoundedFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="scrub_radius_f">
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="ga" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=rc_FW*sin(ga(1))</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Fx_f_Input">
                  <inputSignal ref="../Link[Fx_Tyre_f_C]"/>
                  <inputSignal ref="../Link[scrub_radius_f]"/>
                  <inputSignal ref="../Link[Rollangle_f]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Fx_Tyre_f_C">
                  <inputSignal ref="../Link[M_Fx_f_Input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="3">Fx=i(1)
s  =i(2)
ga=i(3)

Mz_W  =  s*Fx   %in W system; 
My_C  = -Mz_W*sin(ga)  %in C system
Mz_C  =  Mz_W*cos(ga)
ret=[0;My_C;Mz_C]
</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_Fz_Tyre_f_C">
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
                  <inputSignal ref="../Link[r_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="1" arg2="ry" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=-F(1)*ry(2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_Fy_Tyre_f_C">
                  <inputSignal ref="../Link[Fy_Tyre_f_C]"/>
                  <inputSignal ref="../Link[r_cf_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="1" arg2="rz" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=F(1)*rz(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_Tyre_f_C">
                  <inputSignal ref="../Link[Tyre_f_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzV" arg2Dim="1">Fz0  = Fz0_FW
Fz    = FzV(1)
ga    = 0
ka   = i(2)
als    = i(3)

dfz=(Fz-Fz0)/Fz0
Dy=Fz*pDy1*exp(pDy2*dfz)/(1+pDy3*ga^2)
Ey=pEy1+pEy2*ga^2+pEy4*ga*sign(als)
Kyal=pKy1*Fz0*sin(pKy2*atan(Fz/((pKy3+pKy4*ga^2)*Fz0)))/(1+pKy5*ga^2)
By=Kyal/(Cy*Dy)
Kyga=(pKy6+pKy7*dfz)*Fz
Bga=Kyga/(Cga*Dy)
Fy0=Dy*sin(Cy*atan(By*als-Ey*(By*als-atan(By*als)))+Cga*atan(Bga*ga-Ega*(Bga*ga-atan(Bga*ga))))

ga    = i(1)

Byka=rBy1*cos(atan(rBy2*(als-rBy3)))
Kxka=Fz*(pKx1+pKx2*dfz)*exp(pKx3*dfz)
SHr=(qHz3+qHz4*dfz)*ga
Bt=(qBz1+qBz2*dfz)*(1+qBz5*abs(ga)+qBz6*ga^2)
Dt=Fz*(rc_FW/Fz0)*(qDz1+qDz2*dfz)*(1+qDz3*abs(ga)+qDz4*ga^2)
Et=(qEz1+qEz2*dfz)*(1+qEz5*ga*(2/pi)*atan(Bt*Ct*als))
Br=qBz9+qBz10*By*Cy
Dr=Fz*rc_FW*((qDz8+qDz9*dfz)*ga+(qDz10+qDz11*dfz)*ga*abs(ga))/sqrt(1+als^2)

Mzt0=-Dt*cos(Ct*atan(Bt*als-Et*(Bt*als-atan(Bt*als))))/sqrt(1+als^2)*Fy0
Mzr0=Dr*cos(atan(Br*(als+SHr)))
Mz0=Mzt0+Mzr0

Fy=cos(Cyka*atan(Byka*ka))*Fy0
lat=sqrt(als^2+(Kxka*ka/Kyal)^2)*sign(als)
lar=sqrt((als+SHr)^2+(Kxka*ka/Kyal)^2)*sign(als+SHr)
Mzr=Dr*cos(atan(Br*lar))
Mz=-Dt*cos(Ct*atan(Bt*lat-Et*(Bt*lat-atan(Bt*lat))))/sqrt(1+als^2)*Fy+Mzr

ret=-Mz</SymbolicFunction>
                  </function>
                </SignalOperation><Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="F_Tyre_f_input">
                  <inputSignal ref="../Link[S_I_Cf]"/>
                  <inputSignal ref="../Link[Fx_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Fy_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Fz_Tyre_f_C]"/>
              </Multiplexer>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_f_input">
                  <inputSignal ref="../Link[S_I_Cf]"/>
                  <inputSignal ref="../Link[Mx_Fy_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Mx_Fz_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Mz_Tyre_f_C]"/>
                  <inputSignal ref="../Link[M_Fx_Tyre_f_C]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="F_Tyre_f_I">
                  <inputSignal ref="../Link[F_Tyre_f_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="12">s = [i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9)];
Fx = i(10);
Fy = i(11);
Fz = i(12);

FIx = s(1)*Fx + s(2)*Fy + s(3)*Fz; 
FIy = s(4)*Fx + s(5)*Fy + s(6)*Fz; 
FIz = s(7)*Fx + s(8)*Fy + s(9)*Fz; 

ret =[FIx;FIy;FIz]</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_f_I">
                  <inputSignal ref="../Link[M_Tyre_f_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="15">s = [i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9)];
Mx = i(10)+i(11)+i(13);
My = i(14);
Mz = i(12)+i(15);

MIx = s(1)*Mx + s(2)*My + s(3)*Mz; 
MIy = s(4)*Mx + s(5)*My + s(6)*Mz; 
MIz = s(7)*Mx + s(8)*My + s(9)*Mz; 

ret =[MIx;MIy;MIz]</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fxy_Tyre_f_I">
                  <inputSignal ref="../Link[F_Tyre_f_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = F(1)</ele>
                        <ele>ret = F(2)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_f_I">
                  <inputSignal ref="../Link[F_Tyre_f_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = F(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mxy_Tyre_f_I">
                  <inputSignal ref="../Link[M_Tyre_f_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = M(1)</ele>
                        <ele>ret = M(2)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_Tyre_f_I">
                  <inputSignal ref="../Link[M_Tyre_f_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = M(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <KineticExcitation name="Fxy_Tyre_f_I_exc">
                  <connect ref2="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <forceDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </forceDirection>
                  <forceFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Fxy_Tyre_f_I]"/>
                    </SignalFunction>
                  </forceFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                      </xmlVector>
                    </diffuseColor>
                    <scaleLength>0.0005</scaleLength>
                    <scaleSize>0.1</scaleSize>
                  </enableOpenMBV>
                </KineticExcitation><KineticExcitation name="Fz_Tyre_f_I_exc">
                  <connect ref2="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <forceDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>1</ele>
                  </row>
                </xmlMatrix>
              </forceDirection>
                  <forceFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Fz_Tyre_f_I]"/>
                </SignalFunction>
              </forceFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>-1</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>.0005</scaleLength>
                    <scaleSize>.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>    
                <KineticExcitation name="Mxy_Tyre_f_I_exc">
                  <connect ref2="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Mxy_Tyre_f_I]"/>
                    </SignalFunction>
                  </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                      </xmlVector>
                    </diffuseColor>
                    <scaleLength>.01</scaleLength>
                    <scaleSize>.1</scaleSize>
                  </enableOpenMBV>
                </KineticExcitation><KineticExcitation name="Mz_Tyre_f_I_exc">
                  <connect ref2="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>1</ele>
                  </row>
                </xmlMatrix>
              </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Mz_Tyre_f_I]"/>
                </SignalFunction>
              </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>.01</scaleLength>
                    <scaleSize>.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>    
                <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_y_f">
                  <object ref="../Object[Front_wheel]"/>
            </GeneralizedVelocitySensor>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="v_rot_f">
                  <inputSignal ref="../Link[om_y_f]"/>
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="1" arg2="al" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = -om(1)*(r_rim_FW + rc_FW*cos(al(1)))</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="My_Fx_f_W_sop">
                  <inputSignal ref="../Link[Fx_Tyre_f_C]"/>
                  <inputSignal ref="../Link[Rollangle_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Fx" arg1Dim="1" arg2="ga" arg2Dim="1">R_eff =  r_rim_FW + rc_FW*cos(ga(1))
ret = - R_eff*Fx(1) </SymbolicFunction>
                </function>
              </SignalOperation>  
                <KineticExcitation name="My_Fx_f_W_exc" xmlns="http://www.mbsim-env.de/MBSim">
                  <connect ref1="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]" ref2="../Object[Front_wheel]/Frame[C]"/>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>1</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[My_Fx_f_W_sop]"/>
                  </SignalFunction>
                </momentFunction>
              </KineticExcitation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="My_brake_f_W_sop">
                  <inputSignal ref="../../Group[Group_Controller]/Group[longitudinal]/Link[M_brake_f_stat]"/>
                  <inputSignal ref="../../Group[Group_Controller]/Group[longitudinal]/Link[M_brake]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Mbr_st" arg1Dim="1" arg2="Mbr_dyn" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = Mbr_st(1)*(1-Velocity_controller) + Brake_distribution*Mbr_dyn(1)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <KineticExcitation name="My_brake_f_W_exc" xmlns="http://www.mbsim-env.de/MBSim">
                  <connect ref1="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[Wheel_Center]" ref2="../Object[Front_wheel]/Frame[C]"/>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>1</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[My_brake_f_W_sop]"/>
                  </SignalFunction>
                </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.111111</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                    </xmlVector>
                  </diffuseColor>
                    <scaleLength>.01</scaleLength>
                    <scaleSize>.1</scaleSize>
                </enableOpenMBV>
              </KineticExcitation>
              </links>
              <constraints/>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_swingarm.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_swingarm">
              <frames/>
              <contours/>
              <groups>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_swingarm_torsion" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_swingarm_torsion">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="al_tors_swingarm_RW">
                        <object ref="../../Object[swingarm]"/>
                      </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="alp_tors_swingarm_RW">
                        <object ref="../../Object[swingarm]"/>
                      </GeneralizedVelocitySensor>
                      <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_tors_swingarm_sop">
                        <inputSignal ref="../Link[al_tors_swingarm_RW]"/>
                        <inputSignal ref="../Link[alp_tors_swingarm_RW]"/>
                        <function>
                          <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1" arg2="alp" arg2Dim="1">
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>ret=-tors_swingarm(1)*al(1) - tors_swingarm(2)*alp(1)</ele>
                            </xmlVector>
                          </SymbolicFunction>
                        </function>
                      </SignalOperation>      
                      <KineticExcitation name="Mx_tors_swingarm_exc">
                        <connect ref1="../../Object[swingarm_axis]/Frame[C]" ref2="../../Object[swingarm]/Frame[frame_axis]"/>
                        <momentDirection unit="-">
                          <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                            <row>
                              <ele>1</ele>
                            </row>
                            <row>
                              <ele>0</ele>
                            </row>
                            <row>
                              <ele>0</ele>
                            </row>
                          </xmlMatrix>
                        </momentDirection>
                        <momentFunction>
                          <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                            <returnSignal ref="../../Link[Mx_tors_swingarm_sop]"/>
                          </SignalFunction>
                        </momentFunction>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0.666667</ele>
                              <ele>.3</ele>
                              <ele>1</ele>
                            </xmlVector>
                          </diffuseColor>
                          <scaleLength>.01</scaleLength>
                          <scaleSize>.1</scaleSize>
                        </enableOpenMBV>
                      </KineticExcitation>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rear_susp" counterName="n">
                  <Group xmlns="http://www.mbsim-env.de/MBSim" name="Dof_rear_susp">
                    <frames/>
                    <contours/>
                    <groups/>
                    <objects/>
                    <links>
                      <GeneralizedPositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="be_swingarm">
                        <object ref="../../Object[swingarm_axis]"/>
                  </GeneralizedPositionSensor>
                      <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="bep_swingarm">
                        <object ref="../../Object[swingarm]"/>
                  </GeneralizedVelocitySensor>
                      <SpringDamper name="rear_suspension">
                        <connect ref1="../../../Group[Group_Frame]/Object[Frame]/Frame[rear_suspension_top]" ref2="../../Object[Rocker]/Frame[p21]"/>
                        <forceFunction>
                          <NonlinearSpringDamperForce>
                            <forceDeflectionFunction>
                              <TabularFunction>
                                <xy>
                                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                    <row>
                                      <ele>-1</ele>
                                      <ele>-c_suspension_r</ele>
                                    </row>
                                    <row>
                                      <ele>0</ele>
                                      <ele>0</ele>
                                    </row>
                                    <row>
                                      <ele>1</ele>
                                      <ele>c_suspension_r</ele>
                                    </row>
                                  </xmlMatrix>
                                </xy>
                              </TabularFunction>
                            </forceDeflectionFunction>
                            <forceVelocityFunction>
                              <TabularFunction>
                                <xy>
                                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                    <row>
                                      <ele>-1</ele>
                                      <ele>-Fd_compression_r</ele>
                                    </row>
                                    <row>
                                      <ele>0</ele>
                                      <ele>0</ele>
                                    </row>
                                    <row>
                                      <ele>1</ele>
                                      <ele>Fd_rebound_r</ele>
                                    </row>
                                  </xmlMatrix>
                                </xy>
                              </TabularFunction>
                            </forceVelocityFunction>
                          </NonlinearSpringDamperForce>
                        </forceFunction>
                        <unloadedLength unit="m">F0_suspension_r/c_suspension_r + L0_spring_r</unloadedLength>
                        <enableOpenMBV>
                          <diffuseColor>
                            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                              <ele>0</ele>
                              <ele>1</ele>
                              <ele>0.666667</ele>
                            </xmlVector>
                          </diffuseColor>
                          <numberOfCoils>10</numberOfCoils>
                          <springRadius unit="m">.04</springRadius>
                          <crossSectionRadius unit="m">0.008</crossSectionRadius>
                        </enableOpenMBV>
                      </SpringDamper>
                    </links>
                    <constraints/>
                    <observers/>
                  </Group>
                </Embed>
              </groups>
              <objects>
                <RigidBody name="swingarm_axis">
                  <frameOfReference ref="../../Group[Group_Frame]/Object[Frame]/Frame[axis_swingarm]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="p22">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">p22</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">0.92962</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                  </frames><contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">0.015</radius>
                      <height unit="m">0.1</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="swingarm">
                  <frameOfReference ref="../Object[swingarm_axis]/Frame[C]"/>
                  <frameForKinematics ref="Frame[frame_axis]"/>
                  <mass unit="kg">m_swingarm</mass>
                  <inertiaTensor unit="kg*m^2">T_swingarm</inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutXAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="frame_axis">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">frame_axis</relativePosition>
                  </FixedRelativeFrame>
                    <FixedRelativeFrame name="wheel_axis_rear">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">wheel_axis_rear</relativePosition>
                  </FixedRelativeFrame>
                  </frames><contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.666667</ele>
                          <ele>1</ele>
                          <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.08</ele>
                          <ele>0</ele>
                          <ele>0.00</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>-0.11</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.553</ele>
                          <ele>0.04</ele>
                          <ele>0.08</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Wheelaxis_rear">
                  <frameOfReference ref="../Object[swingarm]/Frame[wheel_axis_rear]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">.02</radius>
                      <height unit="m">.1</height>
                    </Cylinder>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Rocker">
                  <frameOfReference ref="../../Group[Group_Frame]/Object[Frame]/Frame[p19]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="p20">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">p20</relativePosition>
                      <relativeOrientation>
                        <aboutY xmlns="http://www.mbsim-env.de/MBXMLUtils" unit="rad">0.78621</aboutY>
                      </relativeOrientation>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="p21">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">p21</relativePosition>
                    </FixedRelativeFrame>
                  </frames><contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-0.05691/2*cos(0.67584)</ele>
                          <ele>0</ele>
                          <ele>-0.05691/2*sin(0.67584)</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>-0.67584</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.05691</ele>
                          <ele>0.02</ele>
                          <ele>0.02</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Rocker_arm">
                  <frameOfReference ref="../Object[Rocker]/Frame[p21]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.0566/2*cos(0.4771)</ele>
                          <ele>0</ele>
                          <ele>-0.0566/2*sin(0.4771)</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0.4771</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.0566</ele>
                          <ele>0.02</ele>
                          <ele>0.02</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
                <RigidBody name="Pull_rod_body">
                  <frameOfReference ref="../Object[Rocker]/Frame[p20]"/>
                  <frameForKinematics ref="Frame[C]"/>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0.0001</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="P22_pr">
                      <frameOfReference ref="../Frame[C]"/>
                      <relativePosition unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-0.17324</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </relativePosition>
                    </FixedRelativeFrame>
                  </frames><contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>1</ele>
                          <ele>1</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-0.17324/2</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.17324</ele>
                          <ele>0.01</ele>
                          <ele>0.01</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                </RigidBody>
              </objects>
              <links>
              </links>
              <constraints>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_swingarm_torsion" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_swingarm_torsion">
                    <dependentRigidBody ref="../Object[swingarm]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                      </ConstantFunction>
                    </constraintFunction>
                  </GeneralizedPositionConstraint>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rear_susp" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_rear_suspension">
                    <dependentRigidBody ref="../Object[swingarm_axis]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                  </ConstantFunction>
                </constraintFunction>
              </GeneralizedPositionConstraint>
            </Embed>    
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rear_susp" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_rocker">
                    <dependentRigidBody ref="../Object[Rocker]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                      </ConstantFunction>
                    </constraintFunction>
                  </GeneralizedPositionConstraint>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="1-enable_rear_susp" counterName="n">
                  <GeneralizedPositionConstraint xmlns="http://www.mbsim-env.de/MBSim" name="con_pull_rod">
                    <dependentRigidBody ref="../Object[Pull_rod_body]"/>
                    <constraintFunction>
                      <ConstantFunction>
                        <a0>0</a0>
                      </ConstantFunction>
                    </constraintFunction>
                  </GeneralizedPositionConstraint>
                </Embed>
                <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" count="enable_rear_susp" counterName="n">
                  <JointConstraint xmlns="http://www.mbsim-env.de/MBSim" name="Pr_sw">
                    <dependentRigidBodyOnFirstSide ref="../Object[Pull_rod_body]"/>
                    <dependentRigidBodyOnSecondSide ref="../Object[swingarm_axis]"/>
                    <independentRigidBody ref="../Object[Rocker]"/>
                    <connect ref1="../Object[Pull_rod_body]/Frame[P22_pr]" ref2="../Object[swingarm_axis]/Frame[p22]"/>
                    <forceDirection unit="-">
                      <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <row>
                          <ele>1</ele>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                          <ele>0</ele>
                        </row>
                        <row>
                          <ele>0</ele>
                          <ele>1</ele>
                        </row>
                      </xmlMatrix>
                    </forceDirection>
                  </JointConstraint>
                </Embed>
              </constraints>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Rear_wheel.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Rear_wheel">
              <frames/>
              <contours/>
              <groups/>
              <objects>
                <RigidBody name="Rear_wheel">
                  <generalizedInitialVelocity>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>(v0/3.6)/r_RW</ele>
                    </xmlVector>
                  </generalizedInitialVelocity>
                  <frameOfReference ref="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
                  <mass unit="kg">m_RW</mass>
                  <inertiaTensor unit="kg*m^2">T_RW</inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutYAxis/>
                  </stateDependentRotation>
                  <frames>
                  </frames><contours/>
                  <openMBVRigidBody>
                    <Cylinder xmlns="http://www.mbsim-env.de/OpenMBV" name="Cylinder2">
                      <diffuseColor>
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-1</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </diffuseColor>
                      <transparency unit="-">0.3</transparency>
                      <initialTranslation unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialTranslation>
                      <initialRotation unit="rad">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </initialRotation>
                      <scaleFactor unit="-">1</scaleFactor>
                      <radius unit="m">r_RW</radius>
                      <height unit="m">0.04</height>
                    </Cylinder>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC>
                    <size unit="m">.4</size>
                </enableOpenMBVFrameC></RigidBody>
              </objects>
              <links>
                <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_War">
                  <frame ref="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
            </OrientationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_Wr">
                  <inputSignal ref="../Link[S_I_War]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="s" arg1Dim="9">x=sqrt( s(5)*s(5)+s(2)*s(2) )
sx=s(5)/x
sy=s(2)/x
ret = [ sx;   s(2);  -sy*s(8); 
         -sy;   s(5);  -sx*s(8);  
           0;   s(8);    sx*s(5)+sy*s(2)] % Drehmatrix Inertial =&gt; W-System (x-Achse parallel zur Fahrbahn, y-Achse in Richtung Radachse)</SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_Cr">
                  <inputSignal ref="../Link[S_I_Wr]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="s" arg1Dim="9">ret = [ s(1); -s(4);  0 ; 
          s(4);   s(1);  0 ;  
          s(7);   0    ;  1  ]    % Drehmatrix Inertial =&gt; C-System (x-Achse parallel zur Fahrbahn, z-Achse normal zur Fahrbahn</SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Rollangle_r">
                  <inputSignal ref="../Link[S_I_Cr]"/>
                  <inputSignal ref="../Link[S_I_Wr]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="sc" arg1Dim="9" arg2="sw" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = asin(sc(3)*sw(2)+sc(6)*sw(5)+sc(9)*sw(8))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_Wcr_I">
                  <frame ref="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
            </AngularVelocitySensor>
                <VelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="v_Wcr_I">
                  <frame ref="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
            </VelocitySensor>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="contact_r_input">
                  <inputSignal ref="../Link[om_Wcr_I]"/>
                  <inputSignal ref="../Link[S_I_Wr]"/>
                  <inputSignal ref="../Link[v_Wcr_I]"/>
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <inputSignal ref="../Link[S_I_Cr]"/>
            </Multiplexer>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="v_cr_C">
                  <inputSignal ref="../Link[contact_r_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="25">om_Wc_I      = [i(1); i(2); i(3)];
S_I_w           = [i(4);i(5);i(6);i(7);i(8);i(9);i(10);i(11);i(12)];
om_Wc_W     =  [S_I_w(1)*om_Wc_I(1) + S_I_w(4)*om_Wc_I(2) + S_I_w(7)*om_Wc_I(3);...
                          S_I_w(2)*om_Wc_I(1) + S_I_w(5)*om_Wc_I(2) + S_I_w(8)*om_Wc_I(3);...
                          S_I_w(3)*om_Wc_I(1) + S_I_w(6)*om_Wc_I(2) + S_I_w(9)*om_Wc_I(3)];
v_Wc_I        = [i(13); i(14); i(15)];
v_Wc_W      =  [S_I_w(1)*v_Wc_I(1) + S_I_w(4)*v_Wc_I(2) + S_I_w(7)*v_Wc_I(3);...
                        S_I_w(2)*v_Wc_I(1) + S_I_w(5)*v_Wc_I(2) + S_I_w(8)*v_Wc_I(3);...
                        S_I_w(3)*v_Wc_I(1) + S_I_w(6)*v_Wc_I(2) + S_I_w(9)*v_Wc_I(3)];
al                 = i(16);
r_w_c_W      = [0; - rc_RW*sin(al);  - r_rim_RW - rc_RW*cos(al)];


v_c_W          = [v_Wc_W(1) + om_Wc_W(2)*r_w_c_W(3) -  om_Wc_W(3)*r_w_c_W(2);...
                        v_Wc_W(2) -  om_Wc_W(1)*r_w_c_W(3) + om_Wc_W(3)*r_w_c_W(1);...
                        v_Wc_W(3) + om_Wc_W(1)*r_w_c_W(2)  - om_Wc_W(2)*r_w_c_W(1)];

v_c_I           =  [S_I_w(1)*v_c_W(1) + S_I_w(2)*v_c_W(2) + S_I_w(3)*v_c_W(3);...
                        S_I_w(4)*v_c_W(1) + S_I_w(5)*v_c_W(2) + S_I_w(6)*v_c_W(3);...
                        S_I_w(7)*v_c_W(1) + S_I_w(8)*v_c_W(2) + S_I_w(9)*v_c_W(3)];

S_I_c           = [i(17);i(18);i(19);i(20);i(21);i(22);i(23);i(24);i(25)];
v_c_C          =  [S_I_c(1)*v_c_I(1) + S_I_c(4)*v_c_I(2) + S_I_c(7)*v_c_I(3);...
                        S_I_c(2)*v_c_I(1) + S_I_c(5)*v_c_I(2) + S_I_c(8)*v_c_I(3);...
                        S_I_c(3)*v_c_I(1) + S_I_c(6)*v_c_I(2) + S_I_c(9)*v_c_I(3)];

ret=[v_c_C(1);v_c_C(2);v_c_C(3)]
</SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Kyal_r">
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Fz" arg1Dim="1" arg2="ga" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = pKy1*Fz0_RW*sin(pKy2*atan(Fz(1)/((pKy3+pKy4*ga(1)^2)*Fz0_RW)))/(1+pKy5*ga(1)^2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="s_relax_r">
                  <inputSignal ref="../Link[Kyal_r]"/>
                  <inputSignal ref="../Link[v_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Kyal" arg1Dim="1" arg2="v" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=Kyal(1)*(9.694*10^(-6)-1.333*10^(-8)*v(1)+1.898*10^(-9)*(v(1))^2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Long_slip_r">
                  <inputSignal ref="../Link[v_rot_r]"/>
                  <inputSignal ref="../Link[v_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v_rot" arg1Dim="1" arg2="v_C" arg2Dim="3">ret=-(v_C(1)+v_rot(1))/v_C(1)</SymbolicFunction>
                </function>
              </SignalOperation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_r_input">
                  <inputSignal ref="../Link[Slipangle_r]"/>
                  <inputSignal ref="../Link[s_relax_r]"/>
                  <inputSignal ref="../Link[v_cr_C]"/>
              </Multiplexer>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_r">
                  <inputSignal ref="../Link[v_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="v" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=atan(v(2)/v(1))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>  
                <NonlinearTransferSystem xmlns="http://www.mbsim-env.de/MBSimControl" name="Slipangle_r_pt1">
                  <inputSignal ref="../Link[Slipangle_r_input]"/>
                  <systemFunction>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="x" arg1Dim="1" arg2="u" arg2Dim="5">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>(u(1)-x(1))*u(3)/u(2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </systemFunction>
                  <outputFunction>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="x" arg1Dim="1" arg2="u" arg2Dim="5">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>x(1)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </outputFunction>
              </NonlinearTransferSystem>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="r_cr_C">
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="al" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = 0</ele>
                        <ele>ret = - r_rim_RW*sin(al(1))</ele>
                        <ele>ret =   r_rim_RW*cos(al(1)) + rc_RW</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>  
                <PositionSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="r_Wcr_I">
                  <frame ref="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
              </PositionSensor>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="road_excitation_r">
                  <inputSignal ref="../../Group[Group_Controller]/Link[time]"/>
                  <function>
                    <PiecewiseDefinedFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <limitedFunctions>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>T_start_road_waves + wheelbase/v0*3.6</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <SymbolicFunction arg1="t" arg1Dim="1">
                              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                                <ele>ret = h_road_waves/2*( 1-cos (2*pi*  v0/(3.6*l_road_waves)*(t(1)-(T_start_road_waves + wheelbase/v0*3.6) )  )      )</ele>
                              </xmlVector>
                            </SymbolicFunction>
                          </function>
                          <limit>T_start_road_waves + wheelbase/v0*3.6 + n_road_waves*l_road_waves/v0*3.6</limit>
                        </LimitedFunction>
                        <LimitedFunction>
                          <function>
                            <ConstantFunction>
                              <a0>0</a0>
                            </ConstantFunction>
                          </function>
                          <limit>100</limit>
                        </LimitedFunction>
                      </limitedFunctions>
                    </PiecewiseDefinedFunction>
                  </function>
                </SignalOperation>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="z_tyre_r_input">
                  <inputSignal ref="../Link[r_Wcr_I]"/>
                  <inputSignal ref="../Link[r_cr_C]"/>
                  <inputSignal ref="../Link[road_excitation_r]"/>
                </Multiplexer>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="Tyre_r_input">
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <inputSignal ref="../Link[Long_slip_r]"/>
                  <inputSignal ref="../Link[Slipangle_r_pt1]"/>
                  <inputSignal ref="../Link[Kyal_r]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="z_Tyre_r">
                  <inputSignal ref="../Link[z_tyre_r_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="7">rI  = i(3)
rC = i(6)
zR   = i(7)

ret = -rC -z0_I_Road + rI - zR</SymbolicFunction>
                  </function>
                </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fx_Tyre_r_C">
                  <inputSignal ref="../Link[Tyre_r_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzH" arg2Dim="1">ka = i(2)
als = i(3)
Fz = FzH(1)
Fz0 = Fz0_RW

dfz=(Fz-Fz0)/Fz0
Dx=(pDx1+pDx2*dfz)*Fz
Ex=(pEx1+pEx2*dfz+pEx3*dfz^2)*(1-pEx4*sign(ka))
Kxka=Fz*(pKx1+pKx2*dfz)*exp(pKx3*dfz)
Bx=Kxka/(Cx*Dx)
Fx0=Dx*sin(Cx*atan(Bx*ka-Ex*(Bx*ka-atan(Bx*ka))))

Bxal=rBx1*cos(atan(rBx2*ka))
Fx=cos(Cxal*atan(Bxal*als))*Fx0

ret=Fx</SymbolicFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fy_Tyre_r_C">
                  <inputSignal ref="../Link[Tyre_r_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzH" arg2Dim="1">Fz0    = Fz0_RW
Fz     = FzH(1)
ga     = i(1)
ka     = i(2)
als    = i(3)
Kyal  = i(4)

dfz=(Fz-Fz0)/Fz0
Dy=Fz*pDy1*exp(pDy2*dfz)/(1+pDy3*ga^2)
Ey=pEy1+pEy2*ga^2+pEy4*ga*sign(als)
%Kyal=pKy1*Fz0*sin(pKy2*atan(Fz/((pKy3+pKy4*ga^2)*Fz0)))/(1+pKy5*ga^2)
By=Kyal/(Cy*Dy)
Kyga=(pKy6+pKy7*dfz)*Fz
Bga=Kyga/(Cga*Dy)
Fy0=Dy*sin(Cy*atan(By*als-Ey*(By*als-atan(By*als)))+Cga*atan(Bga*ga-Ega*(Bga*ga-atan(Bga*ga))))

Byka=rBy1*cos(atan(rBy2*(als-rBy3)))
Fy=cos(Cyka*atan(Byka*ka))*Fy0

ret=-Fy</SymbolicFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_r_C_unlim">
                  <inputSignal ref="../Link[z_Tyre_r]"/>
                  <inputSignal ref="../Link[v_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="z" arg1Dim="1" arg2="v" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=-c_z_RW*z(1) - d_z_RW*v(3) + Fz0_RW</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_r_C">
                  <inputSignal ref="../Link[Fz_Tyre_r_C_unlim]"/>
                  <function>
                    <BoundedFunction xmlns="http://www.mbsim-env.de/MBSim">
                      <lowerBound>1</lowerBound>
                      <upperBound>5000</upperBound>
                    </BoundedFunction>
                  </function>
                </SignalOperation><SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="scrub_radius_r">
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="ga" arg1Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=rc_RW*sin(ga(1))</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Fx_r_Input">
                  <inputSignal ref="../Link[Fx_Tyre_r_C]"/>
                  <inputSignal ref="../Link[scrub_radius_r]"/>
                  <inputSignal ref="../Link[Rollangle_r]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Fx_Tyre_r_C">
                  <inputSignal ref="../Link[M_Fx_r_Input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="3">Fx =i(1)
s   =i(2)
ga =i(3)

Mz_W=s*Fx   %in W system; 
My_C = -Mz_W*sin(ga)  %in C system
Mz_C = Mz_W*cos(ga)
ret=[0;My_C;Mz_C]
</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_Fz_Tyre_r_C">
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
                  <inputSignal ref="../Link[r_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="1" arg2="ry" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=-F(1)*ry(2)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mx_Fy_Tyre_r_C">
                  <inputSignal ref="../Link[Fy_Tyre_r_C]"/>
                  <inputSignal ref="../Link[r_cr_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="1" arg2="rz" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret=F(1)*rz(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_Tyre_r_C">
                  <inputSignal ref="../Link[Tyre_r_input]"/>
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="4" arg2="FzH" arg2Dim="1">Fz0  = Fz0_RW
Fz    = FzH(1)
ga    = 0
ka   = i(2)
als    = i(3)

dfz=(Fz-Fz0)/Fz0
Dy=Fz*pDy1*exp(pDy2*dfz)/(1+pDy3*ga^2)
Ey=pEy1+pEy2*ga^2+pEy4*ga*sign(als)
Kyal=pKy1*Fz0*sin(pKy2*atan(Fz/((pKy3+pKy4*ga^2)*Fz0)))/(1+pKy5*ga^2)
By=Kyal/(Cy*Dy)
Kyga=(pKy6+pKy7*dfz)*Fz
Bga=Kyga/(Cga*Dy)
Fy0=Dy*sin(Cy*atan(By*als-Ey*(By*als-atan(By*als)))+Cga*atan(Bga*ga-Ega*(Bga*ga-atan(Bga*ga))))

ga    = i(1)

Byka=rBy1*cos(atan(rBy2*(als-rBy3)))
Kxka=Fz*(pKx1+pKx2*dfz)*exp(pKx3*dfz)
SHr=(qHz3+qHz4*dfz)*ga
Bt=(qBz1+qBz2*dfz)*(1+qBz5*abs(ga)+qBz6*ga^2)
Dt=Fz*(rc_RW/Fz0)*(qDz1+qDz2*dfz)*(1+qDz3*abs(ga)+qDz4*ga^2)
Et=(qEz1+qEz2*dfz)*(1+qEz5*ga*(2/pi)*atan(Bt*Ct*als))
Br=qBz9+qBz10*By*Cy
Dr=Fz*rc_RW*((qDz8+qDz9*dfz)*ga+(qDz10+qDz11*dfz)*ga*abs(ga))/sqrt(1+als^2)
Mzt0=-Dt*cos(Ct*atan(Bt*als-Et*(Bt*als-atan(Bt*als))))/sqrt(1+als^2)*Fy0
Mzr0=Dr*cos(atan(Br*(als+SHr)))
Mz0=Mzt0+Mzr0

Fy=cos(Cyka*atan(Byka*ka))*Fy0
lat=sqrt(als^2+(Kxka*ka/Kyal)^2)*sign(als)
lar=sqrt((als+SHr)^2+(Kxka*ka/Kyal)^2)*sign(als+SHr)
Mzr=Dr*cos(atan(Br*lar))
Mz=-Dt*cos(Ct*atan(Bt*lat-Et*(Bt*lat-atan(Bt*lat))))/sqrt(1+als^2)*Fy+Mzr

ret=-Mz</SymbolicFunction>
                  </function>
                </SignalOperation><Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="F_Tyre_r_input">
                  <inputSignal ref="../Link[S_I_Cr]"/>
                  <inputSignal ref="../Link[Fx_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Fy_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Fz_Tyre_r_C]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="F_Tyre_r_I">
                  <inputSignal ref="../Link[F_Tyre_r_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="12">s = [i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9)];
Fx = i(10);
Fy = i(11);
Fz = i(12);

FIx = s(1)*Fx + s(2)*Fy + s(3)*Fz; 
FIy = s(4)*Fx + s(5)*Fy + s(6)*Fz; 
FIz = s(7)*Fx + s(8)*Fy + s(9)*Fz; 

ret =[FIx;FIy;FIz]</SymbolicFunction>
                </function>
              </SignalOperation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_r_input">
                  <inputSignal ref="../Link[S_I_Cr]"/>
                  <inputSignal ref="../Link[Mx_Fy_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Mx_Fz_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Mz_Tyre_r_C]"/>
                  <inputSignal ref="../Link[M_Fx_Tyre_r_C]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_r_I">
                  <inputSignal ref="../Link[M_Tyre_r_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="15">s = [i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9)];
Mx = i(10)+i(11)+i(13);
My = i(14);
Mz = i(12)+i(15);

MIx = s(1)*Mx + s(2)*My + s(3)*Mz; 
MIy = s(4)*Mx + s(5)*My + s(6)*Mz; 
MIz = s(7)*Mx + s(8)*My + s(9)*Mz; 

ret =[MIx;MIy;MIz]</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fxy_Tyre_r_I">
                  <inputSignal ref="../Link[F_Tyre_r_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = F(1)</ele>
                        <ele>ret = F(2)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Fz_Tyre_r_I">
                  <inputSignal ref="../Link[F_Tyre_r_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = F(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mxy_Tyre_r_I">
                  <inputSignal ref="../Link[M_Tyre_r_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = M(1)</ele>
                        <ele>ret = M(2)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="Mz_Tyre_r_I">
                  <inputSignal ref="../Link[M_Tyre_r_I]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = M(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <KineticExcitation name="Fxy_Tyre_r_I_exc">
                  <connect ref2="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <forceDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </forceDirection>
                  <forceFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Fxy_Tyre_r_I]"/>
                    </SignalFunction>
                  </forceFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                      </xmlVector>
                    </diffuseColor>
                    <scaleLength>0.0005</scaleLength>
                    <scaleSize>0.1</scaleSize>
                  </enableOpenMBV>
                </KineticExcitation><KineticExcitation name="Fz_Tyre_r_I_exc">
                  <connect ref2="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <forceDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>1</ele>
                  </row>
                </xmlMatrix>
              </forceDirection>
                  <forceFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Fz_Tyre_r_I]"/>
                </SignalFunction>
              </forceFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>-1</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>.0005</scaleLength>
                    <scaleSize>.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>    
                <KineticExcitation name="Mxy_Tyre_r_I_exc">
                  <connect ref2="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                  </row>
                </xmlMatrix>
              </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Mxy_Tyre_r_I]"/>
                </SignalFunction>
              </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>0.01</scaleLength>
                    <scaleSize>0.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>    
                <KineticExcitation name="Mz_Tyre_r_I_exc">
                  <connect ref2="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]"/>
                  <frameOfReference>"firstFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>1</ele>
                  </row>
                </xmlMatrix>
              </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[Mz_Tyre_r_I]"/>
                </SignalFunction>
              </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>0.01</scaleLength>
                    <scaleSize>0.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>    
                <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_y_r">
                  <object ref="../Object[Rear_wheel]"/>
            </GeneralizedVelocitySensor>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="v_rot_r">
                  <inputSignal ref="../Link[om_y_r]"/>
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="1" arg2="al" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = -om(1)*(r_rim_RW + rc_RW*cos(al(1)))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="My_Fx_r_W_sop">
                  <inputSignal ref="../Link[Fx_Tyre_r_C]"/>
                  <inputSignal ref="../Link[Rollangle_r]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Fx" arg1Dim="1" arg2="ga" arg2Dim="1">R_eff =  r_rim_RW + rc_RW*cos(ga(1))
ret = -R_eff*Fx(1)</SymbolicFunction>
                </function>
              </SignalOperation>  
                <KineticExcitation name="My_Fx_r_W_exc" xmlns="http://www.mbsim-env.de/MBSim">
                  <connect ref1="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]" ref2="../Object[Rear_wheel]/Frame[C]"/>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>1</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[My_Fx_r_W_sop]"/>
                  </SignalFunction>
                </momentFunction>
              </KineticExcitation>  
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="My_drive_r_W_in">
                  <inputSignal ref="../../Group[Group_Controller]/Group[longitudinal]/Link[M_brake_r_stat]"/>
                  <inputSignal ref="../../Group[Group_Controller]/Group[longitudinal]/Link[M_brake]"/>
                  <inputSignal ref="../../Group[Group_Controller]/Group[longitudinal]/Link[M_drive]"/>
              </Multiplexer>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="My_drive_r_W_sop">
                  <inputSignal ref="../Link[My_drive_r_W_in]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="3">Mbr_st    = i(1)
Mbr_dyn = i(2) 
Mdrive    = i(3)

ret = Mbr_st*(1-Velocity_controller) + (1-Brake_distribution)*Mbr_dyn + Mdrive</SymbolicFunction>
                </function>
              </SignalOperation>  
                <KineticExcitation name="My_drive_W_exc" xmlns="http://www.mbsim-env.de/MBSim">
                  <connect ref1="../../Group[Group_swingarm]/Object[Wheelaxis_rear]/Frame[C]" ref2="../Object[Rear_wheel]/Frame[C]"/>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>1</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[My_drive_r_W_sop]"/>
                  </SignalFunction>
                </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.111111</ele>
                        <ele>1</ele>
                        <ele>1</ele>
                    </xmlVector>
                  </diffuseColor>
                    <scaleLength>.01</scaleLength>
                    <scaleSize>.1</scaleSize>
                </enableOpenMBV>
              </KineticExcitation></links>
              <constraints>
              </constraints>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Front_wheel.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Gyro_FW">
              <frames/>
              <contours/>
              <groups/>
              <objects>
          </objects>
              <links>
                <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_FW_I">
                  <frame ref="../../Group[Group_Front_wheel]/Object[Front_wheel]/Frame[C]"/>
            </AngularVelocitySensor>
                <AngularAccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_FW_I">
                  <frame ref="../../Group[Group_Front_wheel]/Object[Front_wheel]/Frame[C]"/>
            </AngularAccelerationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="om_FW_FW">
                  <inputSignal ref="../Link[om_FW_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*om(1)+s(4)*om(2)+s(7)*om(3)</ele>
                        <ele>ret = s(2)*om(1)+s(5)*om(2)+s(8)*om(3)</ele>
                        <ele>ret = s(3)*om(1)+s(6)*om(2)+s(9)*om(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_FW_K">
                  <inputSignal ref="../Link[omp_FW_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*omp(1)+s(4)*omp(2)+s(7)*omp(3)</ele>
                        <ele>ret = s(2)*omp(1)+s(5)*omp(2)+s(8)*omp(3)</ele>
                        <ele>ret = s(3)*omp(1)+s(6)*omp(2)+s(9)*omp(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_FW">
                  <inputSignal ref="../Link[om_FW_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3">Mx = om(2)*om(3)*(T_FW(1)-T_FW(5));
My = 0;
Mz = om(1)*om(2)*(T_FW(5)-T_FW(1));

ret=[Mx;My;Mz]</SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_FW_Komp">
                  <inputSignal ref="../Link[M_Gyro_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Mg" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = Mg(1)*Komp_Gyro_FW</ele>
                        <ele>ret = Mg(2)*Komp_Gyro_FW</ele>
                        <ele>ret = Mg(3)*Komp_Gyro_FW</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <KineticExcitation name="M_Gyro_Komp_exc">
                  <connect ref1="../../Frame[I]" ref2="../../Group[Group_Front_wheel]/Object[Front_wheel]/Frame[C]"/>
                  <frameOfReference>"secondFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>0</ele>
                  </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>1</ele>
                  </row>
                </xmlMatrix>
              </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[M_Gyro_FW_Komp]"/>
                </SignalFunction>
              </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.166667</ele>
                        <ele>1</ele>
                        <ele>0.666667</ele>
                  </xmlVector>
                </diffuseColor>
                    <scaleLength>.1</scaleLength>
                    <scaleSize>.1</scaleSize>
              </enableOpenMBV>
            </KineticExcitation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_FW_upperfork">
                  <inputSignal ref="../Link[M_Gyro_FW]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_upperfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = -(s(1)*M(1)+s(2)*M(2)+s(3)*M(3)) * (1. - Komp_Gyro_FW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                        <ele>ret = -(s(4)*M(1)+s(5)*M(2)+s(6)*M(3)) * (1. - Komp_Gyro_FW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                        <ele>ret = -(s(7)*M(1)+s(8)*M(2)+s(9)*M(3)) * (1. - Komp_Gyro_FW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="F_Tyre_Wc_upperfork">
                  <inputSignal ref="../../Group[Group_Front_wheel]/Link[F_Tyre_f_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_upperfork]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="F" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*F(1) + s(4)*F(2) + s(7)*F(3)</ele>
                        <ele>ret = s(2)*F(1) + s(5)*F(2) + s(8)*F(3)</ele>
                        <ele>ret = s(3)*F(1) + s(6)*F(2) + s(9)*F(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_Wc_upperfork">
                  <inputSignal ref="../../Group[Group_Front_wheel]/Link[M_Tyre_f_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_upperfork]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*M(1) + s(4)*M(2) + s(7)*M(3)</ele>
                        <ele>ret = s(2)*M(1) + s(5)*M(2) + s(8)*M(3)</ele>
                        <ele>ret = s(3)*M(1) + s(6)*M(2) + s(9)*M(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <Multiplexer xmlns="http://www.mbsim-env.de/MBSimControl" name="M_upperfork_input">
                  <inputSignal ref="../Link[F_Tyre_Wc_upperfork]"/>
                  <inputSignal ref="../Link[M_Tyre_Wc_upperfork]"/>
                  <inputSignal ref="../../Group[Group_Front_fork]/Link[fork_offset]"/>
              </Multiplexer>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_upperfork">
                  <inputSignal ref="../Link[M_upperfork_input]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="i" arg1Dim="7">Fx     = i(1);
Fy     = i(2);
Fz     = i(3);
Mx    = i(4);
My    = i(5);
Mz    = i(6);
x_off = i(7);

M_Fz  =  x_off*Fy ; 

ret = [Mx ; My ; Mz+M_Fz]</SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Eul_upperfork">
                  <inputSignal ref="../Link[omp_FW_K]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_upperfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">Mxk = T_FW(1)*omp(1);
Myk = T_FW(5)*omp(2);
Mzk = T_FW(1)*omp(3);

MxG = s(1)*Mxk + s(2)*Myk + s(3)*Mzk;
MyG = s(4)*Mxk + s(5)*Myk + s(6)*Mzk;
MzG = s(7)*Mxk + s(8)*Myk + s(9)*Mzk;

ret = [-MxG; -MyG; -MzG]  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_EG_upperfork">
                  <inputSignal ref="../Link[M_Gyro_FW_upperfork]"/>
                  <inputSignal ref="../Link[M_Eul_upperfork]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="MG" arg1Dim="3" arg2="ME" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = ME(1) + MG(1)</ele>
                        <ele>ret = ME(2) + MG(2)</ele>
                        <ele>ret = ME(3) + MG(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>  
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Zw_upperfork">
                  <inputSignal ref="../Link[M_EG_upperfork]"/>
                  <inputSignal ref="../Link[M_Tyre_upperfork]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="MEG" arg1Dim="3" arg2="MR" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = MR(1) + MEG(1)</ele>
                        <ele>ret = MR(2) + MEG(2)</ele>
                        <ele>ret = MR(3) + MEG(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation></links>
              <constraints/>
              <observers/>
            </Group>
          </Embed>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Rear_wheel.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Gyro_RW">
              <frames/>
              <contours/>
              <groups/>
              <objects/>
              <links>
                <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_RW_I">
                  <frame ref="../../Group[Group_Rear_wheel]/Object[Rear_wheel]/Frame[C]"/>
              </AngularVelocitySensor>
                <AngularAccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_RW_I">
                  <frame ref="../../Group[Group_Rear_wheel]/Object[Rear_wheel]/Frame[C]"/>
              </AngularAccelerationSensor>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="om_RW_RW">
                  <inputSignal ref="../Link[om_RW_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*om(1)+s(4)*om(2)+s(7)*om(3)</ele>
                        <ele>ret = s(2)*om(1)+s(5)*om(2)+s(8)*om(3)</ele>
                        <ele>ret = s(3)*om(1)+s(6)*om(2)+s(9)*om(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_RW_K">
                  <inputSignal ref="../Link[omp_RW_I]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*omp(1)+s(4)*omp(2)+s(7)*omp(3)</ele>
                        <ele>ret = s(2)*omp(1)+s(5)*omp(2)+s(8)*omp(3)</ele>
                        <ele>ret = s(3)*omp(1)+s(6)*omp(2)+s(9)*omp(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_RW">
                  <inputSignal ref="../Link[om_RW_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3">Mx = om(2)*om(3)*(T_RW(1)-T_RW(5));
My = 0;
Mz = om(1)*om(2)*(T_RW(5)-T_RW(1));

ret=[Mx;My;Mz]</SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_RW_Komp">
                  <inputSignal ref="../Link[M_Gyro_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="Mg" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = Mg(1)*Komp_Gyro_RW</ele>
                        <ele>ret = Mg(2)*Komp_Gyro_RW</ele>
                        <ele>ret = Mg(3)*Komp_Gyro_RW</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <KineticExcitation name="M_Gyro_RW_Komp_exc">
                  <connect ref1="../../Frame[I]" ref2="../../Group[Group_Rear_wheel]/Object[Rear_wheel]/Frame[C]"/>
                  <frameOfReference>"secondFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>0</ele>
                    </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>1</ele>
                    </row>
                  </xmlMatrix>
                </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[M_Gyro_RW_Komp]"/>
                  </SignalFunction>
                </momentFunction>
                  <enableOpenMBV>
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.166667</ele>
                        <ele>1</ele>
                        <ele>0.666667</ele>
                    </xmlVector>
                  </diffuseColor>
                    <scaleLength>.1</scaleLength>
                    <scaleSize>.1</scaleSize>
                </enableOpenMBV>
              </KineticExcitation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_RW_War">
                  <inputSignal ref="../Link[M_Gyro_RW]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_War_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = -(s(1)*M(1)+s(2)*M(2)+s(3)*M(3)) * (1. - Komp_Gyro_RW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                        <ele>ret = -(s(4)*M(1)+s(5)*M(2)+s(6)*M(3)) * (1. - Komp_Gyro_RW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                        <ele>ret = -(s(7)*M(1)+s(8)*M(2)+s(9)*M(3)) * (1. - Komp_Gyro_RW)  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Tyre_War">
                  <inputSignal ref="../../Group[Group_Rear_wheel]/Link[M_Tyre_r_I]"/>
                  <inputSignal ref="../../Group[Group_Rear_wheel]/Link[S_I_War]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*M(1) + s(4)*M(2) + s(7)*M(3)</ele>
                        <ele>ret = s(2)*M(1) + s(5)*M(2) + s(8)*M(3)</ele>
                        <ele>ret = s(3)*M(1) + s(6)*M(2) + s(9)*M(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Eul_War">
                  <inputSignal ref="../Link[omp_RW_K]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_War_RW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">Mxk = T_RW(1)*omp(1);
Myk = T_RW(5)*omp(2);
Mzk = T_RW(1)*omp(3);

MxG = s(1)*Mxk + s(2)*Myk + s(3)*Mzk;
MyG = s(4)*Mxk + s(5)*Myk + s(6)*Mzk;
MzG = s(7)*Mxk + s(8)*Myk + s(9)*Mzk;

ret = [-MxG; -MyG; -MzG]  % Wirkung auf Fahrzeug ==&gt; neg. VZ!!!</SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_EG_War">
                  <inputSignal ref="../Link[M_Gyro_RW_War]"/>
                  <inputSignal ref="../Link[M_Eul_War]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="MG" arg1Dim="3" arg2="ME" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = ME(1) + MG(1)</ele>
                        <ele>ret = ME(2) + MG(2)</ele>
                        <ele>ret = ME(3) + MG(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Zw_War">
                  <inputSignal ref="../Link[M_EG_War]"/>
                  <inputSignal ref="../Link[M_Tyre_War]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="MEG" arg1Dim="3" arg2="MR" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = MR(1) + MEG(1)</ele>
                        <ele>ret = MR(2) + MEG(2)</ele>
                        <ele>ret = MR(3) + MEG(3)</ele>
                    </xmlVector>
                  </SymbolicFunction>
                </function>
              </SignalOperation>
            </links>
              <constraints/>
              <observers/>
          </Group>
        </Embed>
          <Group name="Group_Kinematic_Observer">
            <frames/>
            <contours/>
            <groups/>
            <objects/>
            <links>
              <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_FW">
                <frame ref="../../Group[Group_Front_wheel]/Object[Front_wheel]/Frame[C]"/>
            </OrientationSensor>
              <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_upperfork">
                <frame ref="../../Group[Group_Front_fork]/Object[upper_fork]/Frame[fork_joint]"/>
            </OrientationSensor>
              <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_lowerfork">
                <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[joint_fork]"/>
            </OrientationSensor>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_upperfork_W">
                <inputSignal ref="../Link[S_I_upperfork]"/>
                <inputSignal ref="../../Group[Group_Front_wheel]/Link[S_I_Wf]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="sL" arg1Dim="9" arg2="sW" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = sL(1)*sW(1) + sL(4)*sW(4) + sL(7)*sW(7)</ele>
                      <ele>ret = sL(1)*sW(2) + sL(4)*sW(5) + sL(7)*sW(8)</ele>
                      <ele>ret = sL(1)*sW(3) + sL(4)*sW(6) + sL(7)*sW(9)</ele>
                      <ele>ret = sL(2)*sW(1) + sL(5)*sW(4) + sL(8)*sW(7)</ele>
                      <ele>ret = sL(2)*sW(2) + sL(5)*sW(5) + sL(8)*sW(8)</ele>
                      <ele>ret = sL(2)*sW(3) + sL(5)*sW(6) + sL(8)*sW(9)</ele>
                      <ele>ret = sL(3)*sW(1) + sL(6)*sW(4) + sL(9)*sW(7)</ele>
                      <ele>ret = sL(3)*sW(2) + sL(6)*sW(5) + sL(9)*sW(8)</ele>
                      <ele>ret = sL(3)*sW(3) + sL(6)*sW(6) + sL(9)*sW(9)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_upperfork_FW">
                <inputSignal ref="../Link[S_I_upperfork]"/>
                <inputSignal ref="../Link[S_I_FW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="sL" arg1Dim="9" arg2="sW" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = sL(1)*sW(1) + sL(4)*sW(4) + sL(7)*sW(7)</ele>
                      <ele>ret = sL(1)*sW(2) + sL(4)*sW(5) + sL(7)*sW(8)</ele>
                      <ele>ret = sL(1)*sW(3) + sL(4)*sW(6) + sL(7)*sW(9)</ele>
                      <ele>ret = sL(2)*sW(1) + sL(5)*sW(4) + sL(8)*sW(7)</ele>
                      <ele>ret = sL(2)*sW(2) + sL(5)*sW(5) + sL(8)*sW(8)</ele>
                      <ele>ret = sL(2)*sW(3) + sL(5)*sW(6) + sL(8)*sW(9)</ele>
                      <ele>ret = sL(3)*sW(1) + sL(6)*sW(4) + sL(9)*sW(7)</ele>
                      <ele>ret = sL(3)*sW(2) + sL(6)*sW(5) + sL(9)*sW(8)</ele>
                      <ele>ret = sL(3)*sW(3) + sL(6)*sW(6) + sL(9)*sW(9)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_upperfork_I">
                <frame ref="../../Group[Group_Front_fork]/Object[upper_fork]/Frame[C]"/>
            </AngularVelocitySensor>
              <AngularVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="om_lowerfork_I">
                <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[C]"/>
            </AngularVelocitySensor>
              <AngularAccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_upperfork_I">
                <frame ref="../../Group[Group_Front_fork]/Object[upper_fork]/Frame[C]"/>
            </AngularAccelerationSensor>
              <AngularAccelerationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_lowerfork_I">
                <frame ref="../../Group[Group_Front_fork]/Object[lower_fork]/Frame[C]"/>
            </AngularAccelerationSensor>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_upperfork_UF">
                <inputSignal ref="../Link[omp_upperfork_I]"/>
                <inputSignal ref="../Link[S_I_upperfork]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*omp(1)+s(4)*omp(2)+s(7)*omp(3)</ele>
                      <ele>ret = s(2)*omp(1)+s(5)*omp(2)+s(8)*omp(3)</ele>
                      <ele>ret = s(3)*omp(1)+s(6)*omp(2)+s(9)*omp(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_lowerfork_UF">
                <inputSignal ref="../Link[omp_lowerfork_I]"/>
                <inputSignal ref="../Link[S_I_upperfork]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*omp(1)+s(4)*omp(2)+s(7)*omp(3)</ele>
                      <ele>ret = s(2)*omp(1)+s(5)*omp(2)+s(8)*omp(3)</ele>
                      <ele>ret = s(3)*omp(1)+s(6)*omp(2)+s(9)*omp(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="om_upperfork_FW">
                <inputSignal ref="../Link[om_upperfork_I]"/>
                <inputSignal ref="../Link[S_I_FW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*om(1) + s(4)*om(2) + s(7)*om(3)</ele>
                      <ele>ret = s(2)*om(1) + s(5)*om(2) + s(8)*om(3)</ele>
                      <ele>ret = s(3)*om(1) + s(6)*om(2) + s(9)*om(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="om_lowerfork_FW">
                <inputSignal ref="../Link[om_lowerfork_I]"/>
                <inputSignal ref="../Link[S_I_FW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*om(1) + s(4)*om(2) + s(7)*om(3)</ele>
                      <ele>ret = s(2)*om(1) + s(5)*om(2) + s(8)*om(3)</ele>
                      <ele>ret = s(3)*om(1) + s(6)*om(2) + s(9)*om(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_upperfork_FW">
                <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[omp_upperfork_I]"/>
                <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_FW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*om(1) + s(4)*om(2) + s(7)*om(3)</ele>
                      <ele>ret = s(2)*om(1) + s(5)*om(2) + s(8)*om(3)</ele>
                      <ele>ret = s(3)*om(1) + s(6)*om(2) + s(9)*om(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>  
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_lowerfork_FW">
                <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[omp_lowerfork_I]"/>
                <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_I_FW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="s" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = s(1)*om(1) + s(4)*om(2) + s(7)*om(3)</ele>
                      <ele>ret = s(2)*om(1) + s(5)*om(2) + s(8)*om(3)</ele>
                      <ele>ret = s(3)*om(1) + s(6)*om(2) + s(9)*om(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>  
              <OrientationSensor xmlns="http://www.mbsim-env.de/MBSimControl" name="S_I_RW">
                <frame ref="../../Group[Group_Rear_wheel]/Object[Rear_wheel]/Frame[C]"/>
            </OrientationSensor>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="S_War_RW">
                <inputSignal ref="../../Group[Group_Rear_wheel]/Link[S_I_War]"/>
                <inputSignal ref="../Link[S_I_RW]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="sL" arg1Dim="9" arg2="sW" arg2Dim="9">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = sL(1)*sW(1) + sL(4)*sW(4) + sL(7)*sW(7)</ele>
                      <ele>ret = sL(1)*sW(2) + sL(4)*sW(5) + sL(7)*sW(8)</ele>
                      <ele>ret = sL(1)*sW(3) + sL(4)*sW(6) + sL(7)*sW(9)</ele>
                      <ele>ret = sL(2)*sW(1) + sL(5)*sW(4) + sL(8)*sW(7)</ele>
                      <ele>ret = sL(2)*sW(2) + sL(5)*sW(5) + sL(8)*sW(8)</ele>
                      <ele>ret = sL(2)*sW(3) + sL(5)*sW(6) + sL(8)*sW(9)</ele>
                      <ele>ret = sL(3)*sW(1) + sL(6)*sW(4) + sL(9)*sW(7)</ele>
                      <ele>ret = sL(3)*sW(2) + sL(6)*sW(5) + sL(9)*sW(8)</ele>
                      <ele>ret = sL(3)*sW(3) + sL(6)*sW(6) + sL(9)*sW(9)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
            </links>
            <constraints/>
            <observers/>
          </Group>
          <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils" parameterHref="Data/Group_Front_wheel.xml">
            <Group xmlns="http://www.mbsim-env.de/MBSim" name="Group_Compensation_wobble">
              <frames/>
              <contours/>
              <groups/>
              <objects/>
              <links>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="om_Diff">
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[om_upperfork_FW]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[om_lowerfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om_got" arg1Dim="3" arg2="om_gut" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = om_gut(1) - om_got(1)</ele>
                        <ele>ret = om_gut(2) - om_got(2)</ele>
                        <ele>ret = om_gut(3) - om_got(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_comp_wobble">
                  <inputSignal ref="../Link[om_Diff]"/>
                  <inputSignal ref="../../Group[Group_Front_wheel]/Link[om_y_f]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om" arg1Dim="3" arg2="omy" arg2Dim="1">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret  = om(3)*omy(1)*(T_FW(1)-T_FW(5))</ele>
                        <ele>ret  =0</ele>
                        <ele>ret  = om(1)*omy(1)*(T_FW(5)-T_FW(1))</ele>
                      </xmlVector>
                    </SymbolicFunction>
                  </function>
                </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_comp_wobble_Sw">
                  <inputSignal ref="../Link[M_Gyro_comp_wobble]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret  = Switch_Gyro_comp_wobble*M(1)</ele>
                        <ele>ret  = Switch_Gyro_comp_wobble*M(2)</ele>
                        <ele>ret  = Switch_Gyro_comp_wobble*M(3)</ele>
                      </xmlVector>
                    </SymbolicFunction>
                  </function>
                </SignalOperation>
                <KineticExcitation name="M_Gyro_comp_wobble_exc">
                  <connect ref2="../../Group[Group_Front_wheel]/Object[Front_wheel]/Frame[C]"/>
                  <frameOfReference>"secondFrame"</frameOfReference>
                  <momentDirection unit="-">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>1</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>1</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>1</ele>
                      </row>
                    </xmlMatrix>
                  </momentDirection>
                  <momentFunction>
                    <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                      <returnSignal ref="../../Link[M_Gyro_comp_wobble_Sw]"/>
                    </SignalFunction>
                  </momentFunction>
                  <enableOpenMBV/>
                </KineticExcitation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="omp_Diff">
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[omp_upperfork_FW]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[omp_lowerfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="om_got" arg1Dim="3" arg2="om_gut" arg2Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = om_gut(1) - om_got(1)</ele>
                        <ele>ret = om_gut(2) - om_got(2)</ele>
                        <ele>ret = om_gut(3) - om_got(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Eul_comp_wobble">
                  <inputSignal ref="../Link[omp_Diff]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="omp" arg1Dim="3">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = T_FW(1)*omp(1)</ele>
                        <ele>ret = T_FW(5)*omp(2)</ele>
                        <ele>ret = T_FW(1)*omp(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Gyro_comp_wobble_upperfork">
                  <inputSignal ref="../Link[M_Gyro_comp_wobble]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_upperfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*M(1)+s(2)*M(2)+s(3)*M(3)</ele>
                        <ele>ret = s(4)*M(1)+s(5)*M(2)+s(6)*M(3)</ele>
                        <ele>ret = s(7)*M(1)+s(8)*M(2)+s(9)*M(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
                <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="M_Eul_comp_wobble_upperfork">
                  <inputSignal ref="../Link[M_Eul_comp_wobble]"/>
                  <inputSignal ref="../../Group[Group_Kinematic_Observer]/Link[S_upperfork_FW]"/>
                  <function>
                    <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="M" arg1Dim="3" arg2="s" arg2Dim="9">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>ret = s(1)*M(1)+s(2)*M(2)+s(3)*M(3)</ele>
                        <ele>ret = s(4)*M(1)+s(5)*M(2)+s(6)*M(3)</ele>
                        <ele>ret = s(7)*M(1)+s(8)*M(2)+s(9)*M(3)</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>    
                <GeneralizedVelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="alp">
                  <object ref="../../Group[Group_Front_fork]/Object[Fork_rot_x]"/>
                </GeneralizedVelocitySensor>
              </links>  
              <constraints/>
              <observers/>
            </Group>
          </Embed>  
          <Group name="Group_Cameras">
            <frames/>
            <contours/>
            <groups/>
            <objects>
              <RigidBody name="Camera_xy">
                <generalizedInitialVelocity>
                  <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                    <ele>v0/3.6</ele>
                    <ele>0</ele>
                </xmlVector>
              </generalizedInitialVelocity>
                <frameOfReference ref="../../Frame[cam_pos_xy]"/>
                <mass unit="kg">.1</mass>
                <inertiaTensor unit="kg*m^2">
                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                    <row>
                      <ele>0.01</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                  </row>
                    <row>
                      <ele>0</ele>
                      <ele>0.01</ele>
                      <ele>0</ele>
                  </row>
                    <row>
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0.01</ele>
                  </row>
                </xmlMatrix>
              </inertiaTensor>
                <stateDependentTranslation>
                  <TranslationAlongAxesXY/>
              </stateDependentTranslation>
                <frames/>
                <contours/>
                <openMBVRigidBody>
                  <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                    <diffuseColor>
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.666667</ele>
                        <ele>1</ele>
                        <ele>0.498039</ele>
                    </xmlVector>
                  </diffuseColor>
                    <transparency unit="-">0.3</transparency>
                    <initialTranslation unit="m">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </xmlVector>
                  </initialTranslation>
                    <initialRotation unit="rad">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                    </xmlVector>
                  </initialRotation>
                    <scaleFactor unit="-">1</scaleFactor>
                    <length unit="m">
                      <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                        <ele>0.02</ele>
                        <ele>0.02</ele>
                        <ele>.01</ele>
                    </xmlVector>
                  </length>
                </Cuboid>
              </openMBVRigidBody>
                <enableOpenMBVFrameC>
                  <size unit="m">0.2</size>
              </enableOpenMBVFrameC>
            </RigidBody>
          </objects>
            <links>
              <VelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="v_frame">
                <frame ref="../../Group[Group_Frame]/Object[yaw_axis]/Frame[C]"/>
            </VelocitySensor>
              <VelocitySensor xmlns="http://www.mbsim-env.de/MBSimControl" name="v_cam_xy">
                <frame ref="../Object[Camera_xy]/Frame[C]"/>
            </VelocitySensor>
              <SignalOperation xmlns="http://www.mbsim-env.de/MBSimControl" name="F_cam_xy">
                <inputSignal ref="../Link[v_frame]"/>
                <inputSignal ref="../Link[v_cam_xy]"/>
                <function>
                  <SymbolicFunction xmlns="http://www.mbsim-env.de/MBSim" arg1="vf" arg1Dim="3" arg2="vc" arg2Dim="3">
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>ret = 50*(vf(1) - vc(1))</ele>
                      <ele>ret = 50*(vf(2) - vc(2))</ele>
                  </xmlVector>
                </SymbolicFunction>
              </function>
            </SignalOperation>
              <KineticExcitation name="F_cam_xy_exc">
                <connect ref2="../Object[Camera_xy]/Frame[C]"/>
                <forceDirection unit="-">
                  <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                    <row>
                      <ele>1</ele>
                      <ele>0</ele>
                  </row>
                    <row>
                      <ele>0</ele>
                      <ele>1</ele>
                  </row>
                    <row>
                      <ele>0</ele>
                      <ele>0</ele>
                  </row>
                </xmlMatrix>
              </forceDirection>
                <forceFunction>
                  <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
                    <returnSignal ref="../../Link[F_cam_xy]"/>
                </SignalFunction>
              </forceFunction>
            </KineticExcitation>
          </links>
            <constraints/>
            <observers/>
        </Group>
        </groups>
        <objects/>
        <links/>
        <constraints/>
        <observers>
        </observers>  
        <enableOpenMBVFrameI/>
        <environments>
          <MBSimEnvironment>
          
          
          
          
          
          
          
          
          
          
            
            <accelerationOfGravity unit="m/s^2">
              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                <ele>0</ele>
                <ele>0</ele>
                <ele>-9.81</ele>
              </xmlVector>
            </accelerationOfGravity>
          </MBSimEnvironment>
        </environments>
        <determineEquilibriumState>false</determineEquilibriumState>
      </DynamicSystemSolver>
    </Embed>
    <RADAU5Integrator xmlns="http://www.mbsim-env.de/MBSim">
      <startTime unit="s">0</startTime>
      <endTime unit="s">5</endTime>
      <plotStepSize unit="s">1e-2</plotStepSize>
    </RADAU5Integrator>
  </MBSimProject>












































































































</Embed>
